## 0701. 撰写优质规范说明书

我曾经与一位认为不需要撰写规范说明书（specification）的程序员争论。当我带着一大本上司要我使用的规范说明书模板，走进他的办公室时，他只是一笑置之（遗憾的是，他也在笑我）。他认为，如果项目复杂到需要用 50 页的文件对程序员作说明，那么这个项目就不值得做了。他把对整个流程与日常文书工作的需要，视为团队在沟通协调上失败的警讯，也认为我们不被信任，没有自己做决定的能力。他说我们不需要这么多的额外耗费与官僚作风，同时也暗示着精巧的计划绝无必要。

由于以前就有过这种争论，因此我微笑置之。我反问道，对于他所居住的高楼大厦，或是每天开车上班经过的 3 层立体高架桥，他是否也抱有相同主张，认为不需要工程规划？显然，他早就领教过这个问题，他微笑地回我说，尽管他乐于见到这类工作仔仔细细地被计划，但毕竞软件工程不同于物理定律的研究或营建工程的实施。我们很快地达成两点共识。第一，相较于传统工程，软件工程较具灵活性，更易于修改，且鲜少与人们的生活生死攸关。但是，我们也都同意，由于我们面对的是复杂的工程挑战，有一组人员依赖于我们的决策，还有预算和时限的压力，我们需要的不只是对于平时在门厅里的对话的记忆，还需要更多的东西，才能确保进行中的事情是对的。

此外我们也同意，项目的做法必须符合我们的工作性质和行事风格。假如拥有一份书面记录可为团队解决真实的问题，而且还可以有加快速度和改善质量的效果（并且，在不得罪任何人的情况下可随时更新），这样的文件会是有用的。他说，如果可以达到这些目标，无论它叫什么或者以什么形式呈现，他都乐于使用。随即，我们修改了规范说明书撰写的流程，使规范说明书成为我们都同意能让团队运用的东西。回去后，我将我们之间的对话略加修饰回报上司并找出了一个折中方案。自此，那份复杂如税务法规般的规范说明书模板便消失了。

这则故事的关键教训就是，如同人们所做的任何事情，撰写规范说明书或为工作提供文件，没有所谓的正确方式。规范说明书就像团队被要求做的大部分事情一样，应该满足当前项目的需求，并符合文件的创建者和阅读者所需。如同网站或软件产品必须经过设计流程以找出最佳方法，规范说明书也需要一些思考和反复，才能正确完成。

但是，我知道很多有经验的人都会掉入「要完成规范说明书（无论他们称为什么）就只有一种做法」的信念的陷阱中，而且倾向于采用他们上次用过的做法。有时候，这种一连串的重复可以追溯到他们最初做过的项目。他们假设，因为那些项目并未造成彻底的灾难，因此，他们写规范说明书的方式都会对结果有正面的贡献；这种主张并未经过调查研究，可能成立，也可能不成立（换言之，尽管规范说明书撰写流程有问题，但项目还是有可能成功）。更糟的是，如果有关规范说明书如何撰写以及为何要撰写的好问题

从未被问过的话，团队中也就无人真正了解规范说明书撰写的流程到底有多好或多坏，或者对团队的效能究竟有多少贡献（这与「没有对撰写高质量程序代码这件事提出好问题，就无法了解程序究竟有多好或多坏」这种现象完全相似）。

本章的目标是说明下列这些想法。首先，规范说明书应该替项目做到三件事：确保对的事被构建、提供总结项目的规划阶段的进度里程碑（milestone）以及在项目的做法上能让不同的个人可以作深度查看和反馈。这三件事非常重要，除了撰写规范说明书的流程外，不太可能有这样的流程可以同时提供这三件事。基于这个原因，我是规范说明书的狂热爱好者。其次，只要撰写者了解规范说明书撰写时常犯的错误，而且认识到规范说明书应该提供的特定益处，人们对规范说明书的多数抱怨都可轻易被改正。

### 7.1 规范说明书做得到和做不到的事

就像远景文件（vision document）那样，规范说明书也是一种沟通的形式。当有效使用时，规范说明书可以用简单而易于接受的方式传达重要信息；在不当使用时，规范说明书就很难看懂，撰写时也很烦人，而且每个碰过规范说明书的人都会沮丧。通常，写出糟糕规范说明书的团队，似乎更需要规范说明书（有句话说：「如狼成群而来，规范说明书如瘟疫降临。」）。多数时候，无说服力或失败的规范说明书，都是来自于对规范说明书能做到以及不可能达成的事有所误解。

以下是规范说明书能替项目做到的重要事情的列表：

1、有效描述即将构建的事物的功能。

2、借由迫使它们明确以协助设计师厘清决策。

3、开始全面实现前，可查看、质疑以及讨论详细的规划。

4、以一对多的方式传达信息。

5、替明确的计划建立一个整个团队都可依靠的参考点（如果在设计阶段已草拟，可以用来当作记载进行中的事项的说明文件。

6、提供自然的进度里程碑，让团队能集中心智。

7、提供保险，以因应撰写者被公交车撞到的状况。

8、加快、改进及增加健全的讨论的频率。

9、让领导者有机会作出回应，并设定质量基准。

10、增加团队（以及撰写者）的明智和信心。

规范说明书做不到或不应该做的事：

1、消除团队成员间的所有讨论。

2、向团队证明撰写者有多聪明。

3、证明某项功能有多重要（或为何不应该砍掉）。

4、把众人转变成具有有理性的观点的人。

5、变成撰写者展露 Visio 或 UML 技能的游戏场。

团队的领导者应该把像这样的一份列表收集起来，交给团队成员使用。每个必须阅读或撰写规范说明书的人，都应该被要求查看这份列表，并在撰写规范说明书前提供反馈也许有些被列在里面的事项，是不需要出现在团队的规范说明书中，或者有些没有列在里面的事项应该要被加进来。这种讨论很快，最多半小时。即使简短交谈，都能定出对规范说明书应该有的贡献的期望，同时让团队成员有机会提出建言，使得规范说明书编写得更好。如果有适用于全团队的规范说明书模板，则在撰写时应该将那些准则铭记在心。

#### 决定要把什么列入规范说明书

每一种我所看过的软件开发或项目管理的方法论，都对规范说明书有不同的定义。我从来不会为此烦心。规范说明书里有四种基本信息，最简单的讨论方式，就是假定将它们各自写成四份不同的文件。但是，这些事情该怎么分割并非特别重要（虽然有些人对此很在意）；要紧的是，对的信息要由对的人指定，而且产生方式必须对需要接收该项信息的人有所帮助。所以，对于较小的团队，这些不同种类的规范说明书时常会合并；而对于较大的团队，它们也许必须分开（但彼此相连），甚至由不同人编写。

1、需求（requirement）。要以文件说明项目所期待的许多事物，就需要需求规范说明书，概述成品必须实现的所有要求和责任。它统合了所有其他的需求工作，并为项目提供一个参考点。最好的情况是有一份胜利条件列表，描述最终结果为何，但不对如何达成目标做太多说明。无论如何，需求都应该在设计流程开始前就定义好（虽然日后可以改善和更新），而且应该从远景文件推衍而来。需求应该配合功能规范说明书，以便于厘清并协助查看。（这样的规划可以满足需求吗？）

2、功能（feature）。功能规范说明书从客户观点描述某个特定使用场景（scenario），或一组特定使用场景的行为和功能。功能规范说明书是设计流程的主要产物，从用户界面（如果有的话）来描述软件功能，并且从非技术的观点详细说明事情应如何运作。功能规范说明书应该描述当客户的工作完成时，其经验会有何改变；同时也应该包含一份简短列表，列出为实现此情景，工程师所定义的工作项目 —— 这和需求列表不同，因为它定义的是满足需求的特定设计，包括用户界面或其他重要设计要素。

3、技术规范（technical specs）。技术规范说明书详细说明实现功能规范说明书所需的工程方法。只有针对最复杂的组件或其他程序员可能使用的可再用（reused）组件，才需要做足够详细的描述。此外，对功能规范说明书所需的工作项目，也必须提供辅助证据。有时，功能规范说明书的深度或技术本质，会消除对独立的技术规范说明书的需求。

4、工作项目列表（work-item list）。这些相当于工作分解结构（work breakdown structure，WBS）。工作项目列表是对实现功能规范说明书所需的每项程序设计委派任务的描述，应该做到把不同重要等级的项目分开的细分程度，同时以天数估计时间（对工作项目的大小应该定义一些界限，也许一天或半天，但怎么定义是程序员的事）。工作项目列表的建立，完全是程序员的工作，而对这些列表进行查看和管理，则是首席程序员或者项目经理的工作。（在技术上，工作项目列表并非规范说明书，只是工程如何实现规范说明书的计划。然而，这种列表非常重要，并且与规范说明书有关，我找不到其他更好的地方来介绍它。）

5、测试标准以及里程碑退出标准（test criteria and milestone exit criteria）。当功能规范说明书写好时，就应该建立测试标准。这必须包含针对新功能的具优先级的测试案例（test case），同时列出目标，指出在这些案例上，程序代码的表现应当如何，才能满足里程碑的质量目标（也就是退出标准，请参阅第十五章）。

让我举个例子，说明这几种不同规范说明书信息如何合并。每当我在大型团队中与许多专家合作时，同时撰写功能规范说明书和技术规范说明书是很常见的。我们会从远景（vision）推衍出需求列表（requirement list），与团队和客户查看该列表，然后把它们放在功能规范说明书的开头。工作项目列表会由程序员作出（通常是放在整个团队都可看的电子表格内），然后复制或链接到功能规范说明书内。最后，我们就有个主要的规范说明书，其中包含许多刚才描述过的多种规范说明书的信息。

考虑这四类规范说明书的最简单方式，就是约略按时间排定先后次序；需求、功能、技术以及工作项目。如同许多其他项目任务一样，这四类信息中的每个类型都是下一类型的基础。团队越大以及项目越复杂，可能就越需要以正式的方式把这几种规范说明书区分开来。

在大型团队中，PM 或设计师应该负责功能规范说明书，而程序员应该负责技术规范说谁负责规范说明书？

明书。他们所写的这些文件，应该让人在阅读时会相信写者都真的彼此了解，而且时常交读。技术规范说明书通常比较短（对读者而言也比较难读），因为其读者群比较小，

且程序员对撰写不用构建的东西不感兴趣。即使如此，用于支持功能规范说明书的设计面的技术规范说明书，应该要符合功能规范说明书的需求。

商业分析师、客户或项目经理通常会撰写需求文件。这取决于谁拥有需求权限，以及项目团队的本质（小型合约团队、大型员工团队）。工作项目列表是程序设计团队管理者的责任，在大型组织中，通常就是首席程序员。

通常，在小型团队中，这是比较随兴的事。谁做什么甚至于哪些文件必须撰写，可能都没有什么严谨的政策。项目经理或首席程序员也许最后会写一份文件，随意混杂着这四种类型的信息，一下跳到这儿，一下跳到那儿，以因应团队目前的需要。这样也可以，只要人们在需要时，能得到他们要的东西。

### 7.2 撰写规范说明书并不是设计

前两章定义了设计流程，说明如何处理想法，并把想法发展成计划。明确了设计流程的重要性，在于把设计与规划工作的动作，与为此撰写规范说明书的动作区分开来。规范说明书的创建，应该尽可能把焦点放在以最佳可能方式表达现有的计划或决策上，而非同时对该计划进行设计。两者间的区分越不明确，就越难达成这两件事。单独执行其中一个流程已经很困难了，越想同时做两个，做好任一个的机会就越低。规范说明书撰写者必须意识到设计和撰写规范说明书时不同的心态。当他们坐下来写规范说明书时，他们必须停止探索和创造，把焦点摆在表达和说明上；或者，至少他们必须有回头的打算，大量修改文件，以反映说明者而非创建者的声音。我们理解事情的方式，不见得是向其他人说明那件事的最佳方式，在撰写规范说明书时（或其他文件），记住这点很重要。

#### 描述最终设计与如何构建

虽然把功能和技术规范说明书结合成一份文件是有可能的，但多数时候，两者还是需要有明确独立的章节。我读过最糟的规范说明书之一，就是掉进同时做这两件事的陷阱里。撰写者既精明又有才华，试着在描述设计的同时又说明该如何构建。我一打开那份文件，马上就知道他一定花了不少时间撰写。他做了大幅且精细的图表，显示出对象和组件之间的关系，同时又以客户如何使用的观点来作图解。结果就是一场出色且非常精致的灾难。规范说明书看起来令人印象深刻，但读了五分钟后，就会带着沮丧，挣扎着想看懂，而且有股冲动想掐死他（显然他的团队也有类似反应）。他试了几次，想让人读懂，但是很可惜，这只是更增加了他们的负面反应（以及潜在的暴怒）。

我试着想帮忙，所以去跟规范说明书撰写者谈一谈，试着提供一些建言。他承认他失去了焦点，而规范说明书本身并没那么重要，但他仍然相信他的做法是好的。他宣称，因为他知道程序员需要参考数据，以了解预期的行为以及对象关系的高层次细节，所以把它们合并起来是合理的。我的看法是，即使有人需要这两种信息，也没有理由假设他会同时需要，或者需要将它们放在同一页。通常，以单一层次的思绪撰写和阅读、一次处理一个层次的东西，会比合并起来要简单许多。优质规范说明书通常会以不同层次描述设计：首先，以客户语言描述客户经验；其次，从高层次角度观察基本对象和架构；第三，说明复杂和详尽的工程设计问题。

#### 优质规范说明书可以简化事情

对满脑子技术的人来说，最困难的事就是有效选择哪些细节可以省略以及何时省略。在经历许多可怕复杂的逻辑和数学课程之后，我知道最好的教师了解何时该跳过一些不太重要但又有点重要的事情，而且当学生（或读者）准备好时，又该如何回到那些项目。要把规范说明书写好，也会用到相同的技巧。讲的都是重点，众人会对工作有所了解，并做更明确的处理。读过规范说明书后，事情该如何构建，在他们的头脑中会更加细致，而且对 PM 或团队中的其他人所提问题的质量也会提升。要找到这种效果。你不可能接触到所有的人，但要努力和项目的重要贡献者取得联系。

当然，对于复杂的对象模型或非常细致的界面，复杂度是无法避免的。有些事情可能得花一些说明和时间才能理解，但是，一定要确定真是这种情况。比较常见的是以复杂度作为借口，掩饰其撰写拙劣或思想平凡。撰写规范说明书的唯一重点，就是以某种描述事物的方式，让人们能以最少的努力来理解。在最坏情况下，理解规范说明书所花的时间，会比自行设计的时间还长。但是，就像在写作上的多数情况那样，这些标准都很主观。找到正确的清晰程度以及适当的复杂度，这都是判断的问题，最好是留给团队领导者决定。

但是，为了试着把事情描述好，以下是撰写规范说明书时的一些技巧以及应当避免的事情：

1、从其他规范说明书借用优良的说明内容（即使是其他人写的）。适当使用超文本（hypertext），必要时，可从网站上撷取有用的概要（团队领导者应该鼓励这么做）。

2、避免行话和模糊不清的语言。除非你确定对读者有帮助，否则别用，因为很少有帮助。

3、真要用的话，也应该把宏观概念详加说明，转变成明确的知识，同时把多余的咬文嚼字抛弃掉，减少刻意将事情概念化所可能引发的迷惑。但这样做的用处还是比较少。

4、紧握旧规范说明书。当你受困于不知如何才是表达概念或者图示说明的最佳方式时，旧规范说明书就是很好的参考资料。当你看见别人写了一份优质规范说明书时，也要把握住。

5、当你撰写时，心中要有特定的读者群。即使是 10 人的团队，也可能有 4 或 5 人会极为依赖规范说明书。在这些人之中再加入一个精明的人，但他不在团队内，对你正在使用的特定技术也不熟悉。那么你要怎么对他描述困难的概念？

6、不要爱上 Visio 或流程图。和所有工具都要保持柏拉图式的关系。通常，只有建立者才对那些图表感兴趣，而那些图表对项目的效用，通常不如其建立者所想的那样重要。有时，一段好文字或者随兴以手绘制的草图，会比内含 500 个元素的 UML 图还要好（这是因为图表是撰写者了解某件事的唯一方式，但无法保证这是对其他人说明的最佳方式）。工具和图表可以成为重要的东西，只是要保持客观。

7、这是参考资料还是规范说明书？规范说明书通常不用完整列出 API 参考资料，或者描述每个实例或可能的行为。把焦点集中在 10 或 15 个常用或最重要案例，然后再以另一份文件将其他剩余的部分都列出来（不用太详细），这样完全合理。

8、深入研究前，使用虚拟程序代码或用英文，从高层次来描述复杂算法。如前所述，考虑如何以分层次的方法来说明，也许是最快的学习方式 —— 即使对精明的人也是这样。至少，优质的摘要和概述会长久有用。

这里还有一项技巧，我一直觉得有用：无论何时，只要有人对规范说明书草稿里的事项有疑惑（只要你贿赂他，让他先去读，就会发现），就花五分钟向他说明。当他了解后，问他是否有更好的方式可以在规范说明书中说明。有时你会得到不错的建言，但有时不会，不过你对你所写东西的了解总是会改进，因为你强迫自己扩展观点。每次你问一个人，就会以不太一样的方式来思考特定概念，从而提高了找到更佳方法的机会。身为规范说明书撰写者，要记住一点；只要你去问，就会比你只是等而更容易获得优质的反馈。

#### 确保对的事会发生

规范说明书定义了一组目的，声明：「如果事情按预期进行，那么当工作完成，就能得到文件中描述的一切。」意思就是说，功能规范说明书中传达的所有（或合理的高百分比）的行为和功能，都应该在完工后于成品程序代码的运行中表露出来。虽然在规范说明书完成的那一天之后，世界完全有可能已改变，但在完成的那一天，其意图依然持续着。当世界改变时，规范说明书就应该更新，以反映新的世界以及新的目的 —— 无论是什么。

在工程级别上，规范说明书的目标是把这些目的传达给需要利用这些目的的每个人。就测试员和质量保证（quality assurance）而言，这表示有足够的精确度，可得知项目的预期行为，以便于草拟测试案例和估算。项目的营销、说明文件以及任何其他专家在进行他们的工作前，对于产品最终的样子，会有其他问题需要回答。技术支持或业务人员必须了解事情如何运作，如此才能对产品进行支持或对计划进行支持。

众人读过规范说明书后，可以问的最佳问题之一是：「你有没有找到需要的东西，可以把工作做到最好？」把焦点转到读者身上，他们对规范说明书的兴趣也会转变。他们会问些较佳的问题，针对接下来会发生的真实工作，真心把规范说明书拿来用。

### 7.3 谁、何时以及如何

如同远景文件那样，规范说明书要有一位撰写者，这非常重要。每个要做这件事的人都应该提出意见并增加内容，借此做出贡献，但应该要有人对其进行过滤、塑形并整合起来。理由很简单：如果你想让规范说明书读起来，像是头脑清醒的人所写的东西，就不能让不同的人负责撰写文件的各个部分。只要有位撰写者知道他的工作，是整合任何人所提供的优质贡献以及建议，事情应该就会有好结果。

假定有位主撰写者，这项工作的可能候选人就是项目经理、设计师或首席程序员。因为规范说明书代表的是跨功能性的决策，应该由最该对那种层次的决策负责的人来写。功能规范说明书和技术规范说明书必须彼此相符，并和程序设计团队收集的工作项目列表接合在一起。如果工程和设计都在设计流程中被一起做出来，要确保这些事情相符就很容易了。提早合在一起做有个优点，这样会改变对规范说明书撰写流程的观点：它会被视为计划工作内容的幸福合作，而非争吵和沮丧过程的开始。

基于这个原因和其他理由，规范说明书的工作应该在设计阶段就展开。当原型做出来，想法也探索过，小型决策开始从这些工作中跑出来时，那么，粗略草拟规范说明书文件的工作就可开始了（应该要标明为早期草稿）。规范说明书草稿可暂时不公开，直到有足够的说明内容，而且对多个人有价值为止。在项目管理、设计、营销以及程序设计之间的对话里，对什么是正确设计内容的了解会缓慢而稳定地成长，而规范说明书应该追随这些讨论内容，当设计流程到达只剩两个主要替代方案的时间点时，规范说明书背后应该就有很强的动力了。桌上只有两个替代方案，规范说明书的量就可以少到只包含这两个替代方案都会用到的常用元素和工程工作（例如，这两种设计方案都需要的搜索引擎），以及高层次的其他重大决策列表及其潜在含意。

#### 为一个人撰写与为许多人撰写

对项目经理来说，规范说明书中置放的是只对他们有着的信息。通常许多问题会来自不同的人，单一的规范说明书就变成最易于记载这些问题的文件。可惜的是，除了项目经理之外，其他人都会觉得这种精细的程度太扰人。阅读规范说明书不应该让人觉得好像在读撰写者的工作日志（虽然像很多科学家和工程师那样，保持独立的工作日志，有助于发现好的想法）。团队越大、越多专业人士参与，这个问题就会变得越严重。

然而，规范说明书的重要功能之一，就是直接协助 PM。因为他得组织和领导工作，可能没有人会比他更常对这份文件做出修改或阅读。出现在规范说明书中的日志式对话有个重要功能 —— 在追踪项目相关信息的特定细节时，会有其价值。诀窍就是，不要模糊了规范说明书试图描述的基本叙述和决策。

所以，撰写规范说明书时，就应该仔细区分哪些细节只对 PM 有用，而哪些对团队其他人员有价值。最简单的方式，就是在规范说明书中把行为或功能的说明，与对当前描述内容相关的论点或问题分隔开来。因此，在规范说明书结尾处应该有一份开放问题列表，这就是最简单的解决办法。

### 7.4 规范说明书何时完成？

在规划阶段，撰写与查看规范说明书就是其自然的结束。理论上，规范说明书完成时，团队就应该知道所要构建的大部分细节以及构建的方式。项目已准备好全速前进，而剩余的工作会从规划师和设计师手中，转移到程序员和测试员。

#### 写多少才够？

决定规范说明书何时完成需要判断。总有些问题会拖延，或者和其他团队或项目有相依性，而他们还没完全处理好。「规范说明书完成」这个批准标志可以指程度差异极大的完成和质量取决于项目和团队。这里没有对错：有时候，进度压力或其他考虑，会重于较不充分的规范说明书所带来的风险。就像项目的其他高层次方面那样（程序代码质量、稳定度、效能），只有团队领导者的判断可以决定投注精力的适当程度。当然，整体工程策略越趋向于反复式，则规范说明书的撰写就越可能有灵活性。

但通用规则是这样的：规范说明书越强健，实时做出成果的几率也越高。于是，问题就在于你需要多少几率？让规范说明书再多好 5%，是否值得花这时间？或者，程序员或 PM 在撰写规范说明书的过程中，已了解了这些细节？这无法轻易得到答案。看着任一个已完成的规范说明书，我得运用自己的判断。我想这需要项目经验，更甚于程序设计或写作技巧，才能作出决定。

然而，重点是在规范说明书被视为完成前，无论期待什么层次的完成度，唯一达成的方式，就是透过查看的流程。因为这非常主观且相对，唯一让规范说明书有可靠质量的方式，就是让团队领导者（以及规范说明书使用者（consumer）查看并提出反馈意见（下一节会说明这个过程）。

#### 如何管理开放问题？

无论团队对设计流程控制得有多好，在规范说明书撰写期间，总会有尚未解决的问题。如果这些问题没有适当处置，灾难就等在后面。许多项目中期的灾难，都是对规范说明书问题处置失当或忽视的结果。PM 主动对这些问题进行收集和查看，让团队尽早承认其存在，这是很重要的。对于经验不足的 PM，这是很艰难的挑战，因为他们会被其他的规范说明书撰写任务给绊住，以至于未拨出适当时间做开放问题管理。通常都得等到项目晚期被问题绊住了，才会认识到早期问题追踪的价值。

对开放问题的有效控制纯粹是勤勉问题。要有人调查潜在问题，并花时间把它们写下。这里没有魔术。写下来之后，要区分先后顺序，委派出去，然后解决。如果没有人花这时间，预防重大问题只是侥幸而并非技巧。

假设你以某种方式追踪问题，即使只是你的办公室中的白板上的列表，这里的一些基本问题仍有助于区分先后顺序并加以精制：

1、这个问题何时必须解决？谁是作决策解决该问题的最佳人选？

2、这个问题能否以某种方式独立出来，也许做成特定组件或使用场景？或者，这个问题是否会冲击整个功能或项目？

3、此问题有哪些可能的解法尚在考虑中？（例如，我们会用 ASP 或 PHP，但不会用 JSP。）每种替代方案对规范说明书有什么冲击？

4、我们可以删掉这个问题吗？在优先级 1 的用户场景中，这个问题对客户的冲击如何？

5、这个问题能否切割成可以（应该）委托给其他人的更小问题？

6、阻碍解决此问题的是谁或是什么事？该做什么才能把阻碍消除掉？（解决方法可能是在技术上或政治上。）

如果有很多重大问题，而且很难切割，有些事情就会出错，而设计流程或团队领导就会失败。解决此问题的办法不在开放问题控制的讨论范围内（请参阅第十一章）。

#### 终止规范说明书差距

如果你要妥善控制开放问题，就有可能借此对这些问题的解决作出估计，而终止进度差距。这个基本想法如图 7-1 所示，通常请称为「散弹打鸟」。如果做得好，即使还有些尚未解决的设计问题存在，规范说明书还是能被查看，而被视为实时完成。散弹打鸟确有风险：你是在估计团队将会把剩下的问题解决得多好，而不是等着团队去实际解决全部问题。然而，这不见得是高风险的一步，而是依赖于我们对问题有多了解，以及对这些问题所做的假设有多恰当。不然，想一想，现在有两个团队。A 团队有份很长但被充分了解的问题列表，B 团队有份很短但未被充分了解的问题列表。你认为最可能准时完成的团队是哪一个？我赌是 A 团队（A 团队主题音乐播放了）。令人怀疑的是，B 团队的短问题列表，意味着他们还没找到所有规范说明书问题。A 团队花了比较多时间去了解他们的开放问题，因此对项目引发的任何挑战都会有较佳准备。

图 7-1：终止设计/规范说明书差距

有一点很重要，要注意终止差距不是指要放弃用于决定这些决策所需的设计工作，而是指 PM 要试着暂退一步，仔细下判断，以便尽可能跟上进度。

为了协助终止差距，对每个开放问题，可考虑下列问题：

1、无论选择的替代方案是哪一个，是否有必须完成的工作项目？如果有，就应该作出估计，加进规范说明书中。必要时，这些工作项目可在规范说明书定案前就开始。

2、PM 或设计师能解决这个问题吗？解决这个问题是否会引出新的工作项目？（例如，有可能平行地工作：PM 要解决这个未决问题，而程序员开始了解那些工作项目。）

3、要解决此问题，有哪些可能的替代方案尚在考虑中？

4、在这些可行的替代方案中，哪一个是最昂贵的？对这个方案牵涉的工作项目作出估计，让规范说明书和工作项目列表有个最坏打算的设计计划。

5、这是主要或核心组件吗？程序员何时必须实现此组件？这个组件可以在日后的实现阶段再设计吗？是否有其他组件依赖于这个组件？

6、这个问题能否被包含、缩小、切割或删掉？如果不能，就放到顺序列表的顶端。

终止差距不见得都能成功，有可能你全力推进，让事情往前走，但还是发现你差得很远。即使如此，推近一步，也不会造成损失。经验不足的团队通常需要这种压力，以迫使他们面对所有的问题（技术和其他方面），而经理人也许无法全面了解尚未解决之事的复杂度，直至出状况为止。主动终止差距有很好的论据，不要等到进度有落后的风险时才要面对。

#### 规范说明书完成的重要性

项目进度表应该有个日期，用来指定规范说明书完成日，也许这是 PM 作为项目个别贡献者最重要的日期。通常，撰写规范说明书是 PM 对项目最主要的重要文字递交项目（也许是唯一的）。规范说明书一旦完成，PM 的焦点就转移到引导和带领项目前进，包括协助团队过渡到全面开发。

规范说明书完成后，项目团队应该在心理和态度上有个转变。针对目前的里程碑，心情上应该要知道准备工作已就绪，许多艰难决策也完成了。团队已经历过一些重大挑战，了解正确设计，而且探讨过实现远景的众多可能性以找出连贯的规划内容。再来就是 PM 要确保每个参与工作的人，目前为止都有这个认识，而且也对他的工作有所认知。

注意：面对面告诉人们你欣赏他们的工作是最佳方式。不要依靠寄电子邮件给整个团队，就想让每个人感同身受。逐一拜访办公室，或者打电话给他们。简短的对话会比任何电子邮件更有情绪感染力。

虽然舞士气这种事和激励性谈话很难做得好，但对于工作如期完成，还是应该有某种针对团队全体的感谢方式通常简单的事情最有效：下午放假阳光下慢慢地吃顿午餐或者一个礼拜免费的啤酒或咖啡厅的点心。日常工作中有些具建设性的休息时刻（例如，开工作场所），就是协助团队转移心情、重新充电的最佳方式，以准备面对接下来数周或数个月的各种压力。

### 7.5 查看和反馈

人们对规范说明书所犯的最大错误就是一直等，直到正式查看过程开始，才能就其内容查看与反馈做出反馈。查看是用来确认和精炼，不是为了同时做好第一轮及最终决策。这就是为何设计流程如此重要的另一原因：也就是说，设计决策会有很多次反复，而撰写者有很多机会可将优质建议整合进来。团队领导者应该尽早做些非正式的审查，同时把规范说明书草稿放在公司内部网络上，让这样的情况能成真。但这不是说规范说明书查看会议应该是个不费吹灰之力的事，每个人都应该参与查看过程，并很清楚地知道他在其中的角色。

查看规范说明书有几种不同方式，但多数都牵涉到开会。会议中，会朗读此份文件，或者讨论到某人满意为止。这种会议形式有多正式或不正式，和团队文化、团队领导者的态度以及项目本质有很大的关系。但是，一旦开了会，目标就是要回答两个问题：「这份规范说明书是否够详尽，足以引导我们做完开发工作？」以及「结果是否会满足项目在这部分的需求及目标？」显然还有很多更明确的问题要问，但是，都可从这两个关键问题推衍出来。主持查看流程时，要让这些问题获得有信心的答案。

#### 如何查看规范说明书

规范说明书的查看应该是一种团队行为。虽然注意力的中心是文件本身和撰写文件的人，但目标应该是确认每个参与项目的人都同意文件中的内容。最简单、最快速的方法，就是让他们聚在一间房间内，让他们都知道任何被提出问题的答案。我看过规范说明书的查看是以电子邮件或电话会议的方式进行，但我无法说我对结果满意。一旦有争议性的问题出现，我希望我是和团队待在相同房间里，这样我才能用白板或手势实时说明事情。规范说明书越复杂，你就越想让他们都待在房间里（如果你被迫以虚拟方式工作，而且你认为每个人都必须参与查看，就以三到五人的小组进行。像规范说明书审查这种复杂任务，与一堆人进行电话会议和视频会议，很快会变成闹剧）。

应该要事前几天就订好一间中型会议室，保留一两个小时的空档。如果规范说明书已准备好可供查看（由撰写者确定，按照团队领导者定义的标准来指导），就应该当成会议邀请的附件。就我记忆所及，我也只有少数几次能这么做。比较常见的情况是，我大约在一星期前事先预订会议室，然后通知每个人，他们会在规范说明书查看会议开始前 24 小时，经由电子邮件拿到规范说明书。有些人痛恨这种做法，但我知道这是提供最新状态文件并使人阅读的最成功的方式。有了事先的提醒，众人可以预做规划，在那 24 小时内找时间阅读。

此外，我认为，要求那些参加规范说明书查看的人必须在出席前阅读规范说明书，是很公平的。真正需要阅读规范说明书的人自然会找到时间去读，因为那是他们所做的最重要事情之一。如果他们真的连至少翻过文件来看看有没有明显的问题，都找不到时间，那么无论他们说什么，这件事对他们而言都不是最重要的，因此，他们也不适合在这个房间。

只要我有权限能这么做，我总是会把开会前阅读规范说明书当作整个团队的规则。这样可以确保两件事：首先，减少出席人数，只让真正需要参加的人出现，这让整间会议室充满不重要的挑剔客的机会减少；其次，查看会议会变得快很多，因为每个人参加时都有相似深度的理解。没读规范说明书的人一提问题就容易引人侧目。如果他们的问题有效，这些问题就会被考虑；但如果问题已在规范说明书中提及，要求他们去读那一节并在开完会后要紧追着规范说明书撰写者，那也很公平。

#### 谁该在那里？会议怎么开？

房间内每类重要角色应该至少有一人（程序设计、测试等），外加其他重要的贡献角色（商业、设计、说明文件）。查看应该对整个团队开放：如果测试员或程序员对规范说明书有兴趣，而且已花时间去读，即使不负责特定功能，他们的参加也应该受到欢迎。团队领导者们应该是选择性的（optional）被邀请人，由他们自行决定是否有必要参加会议。如果工作做得很好，他们大概知道足够的细节，只会参加那些最具争议性的规范说明书查看会议。另一方面，如果是经验不足的团队，他们也许必须参加每场会议。

实际的会议应该由 PM（或规范说明书撰写者）主持。过程很简单：回答问题。如果没有问题（换言之，太虚幻境），而应该在的人都在房间内并对规范说明书很满意，查看就结束了。有些 PM 喜欢逐一查看定案的原型（prototype），这样做也可以；其他 PM 则较喜欢一节一节看文件。就我个人而言，我认为这很浪费时间（如果我写了不错的规范说明书，而每个人都读过，何必整个又走过一遍？），但有些团队喜欢这么做。所以，只要行得通，就用吧。唯一重要的事就是，众人参与的是健康的讨论，提出好问题，一起合作解决问题。

对任何提问，则由房间内的人讨论出答案，直到提问者满意为止，或者在规范说明书中的开放问题列表中加上新的项目。当问题结束时，PM 要查看开放问题列表（会议室里的白板对列举新项目就很适用），然后决定是否应该再开另一次查看会议讨论。如果没这个必要，规范说明书就可以被视为已查看完毕，对新的开放问题所要进行的调查和解决就先搁置。

查看完规范说明书后，PM 应该定下时限，以响应会议中提出的新问题。开完会后，每个受邀参与会议的人应该都要收到一封电子邮件，内附开放问题摘要、下次查看日期（如果有排时程）以及开放问题应该被解决的时限。如果有项开放问题会阻碍团队的另一个人做事，这就特别重要。事实上，对于造成阻碍的问题在规范说明书查看时应大声提出，并给予特别关注。

#### 问题列表

以多年来众人发现常会出错的事项为基础，每次查看规范说明书时，这些问题都应该提问题列表出来。即使提出艰难问题并没有找到特定论点，这样做也会迫使团队以批判性眼光思索他们要做的事。记住，这不是期末考：让每个人在出席前先看到问题，不会怎么样。确保每个与会者事先做好准备，对你是有利的。

因为设计和规范说明书的撰写都是乐观的流程，查看时，众人应该持怀疑态度，探索可能被忽略的事（要注意不要刻薄。批判性眼光不见得要不同寻常、变得残忍或者让人感觉很差。如果团队在准备规范说明书的查看上感到很痛苦，团队领导者和其他个人都脱不了责任）。即使团队知道正确的问题，还是要有人去催促与研究，以确保真正的答案会出现。

以下是我的列表，不过我会鼓励你修改这些问题，把你自己的加进来：

1、程序员的工作项目列表和规范说明书相符吗？规范说明书中的每项重要组件和每个工作项目的关系是什么？设计过程中的哪个地方最有可能找到漏掉的工作项目？

2、这样的设计最可能以什么方式出错？最弱的组件或界面是什么？为何无法改善？

3、这样的设计，哪一方面最强健？哪一方面最弱？我们最有信心和最没信心的是什么？我们的力量和信心是否以最重要组件为中心？

4、我们有适当级别的质量吗？这样可以做到项目远景所需的可靠性、效能以及可用性吗？测试的估算实际吗？

5、为何简单一点的设计不会更好？我们真的需要这么多的复杂度或功能吗？我们有什么证据或扎实的论点，可说明简单一点就不可行？

6、这样的设计和什么有相依关系？有没有什么技术、公司、项目或其他规范说明书失败时，会破坏或阻碍工作的进行？我们有任何应急方案吗？

7、设计中的哪些元素最可能改变？为什么？

8、指派给这个项目的测试、说明文件、营销以及其他方面的专家，是否都有做出最佳工作所需的信息？他们最关心的是什么事？这些事该如何解决？或者，有没有扎实的理由可让我们忽视？

9、就此规范说明书或功能而言，PM、程序员以及测试员最关心的是什么？

10、是否有机会共享或借用此项目正在构建的其他功能的程序代码？我们是否满足 UI 所需的可达性和区域化需求？

11、这样的设计有什么安全防护风险（security risk）？为何不可把它删除？在规范说明书中说明了吗？包括了潜在的补救方法吗（亦即，风险模式（threatmodel））?

12、我们有没有可信赖的证据指出，特定用户可以利用此 UI 设计，成功地做到他们想做的事？

### 摘要

1、规范说明书应该做到三件事：确保构建的是对的产品、作为进度里程碑指出项目规划阶段告终，以及在项目进程中让不同的个人可以做深度查看和反馈。

2、规范说明书只会解决特定问题。团队领导者应该清楚，他们想用规范说明书解决哪些问题，以及什么问题需要以其他方式解决。

3、优质规范说明书可简化事情，它们主要是一种沟通形式。

4、撰写规范说明书与设计有极大的差异。

5、谁来撰写以及谁对规范说明书有控制权，应该要有明确的授权。

6、终止差距是控制开放问题并加速规范说明书撰写流程终结的一种手法。

7、查看流程是定义和控制规范说明书质量的最简单的方式。

附注

1 因此，有些团队让规范说明书也采用源代码控制机制，配合上传/下载锁定机制，让多人可以共同编辑文件，而不会覆盖彼此的内容。这么做通常很辛苦，但值得去做。同样地，以某种方式指出版本之间的差异也可节省时间。浏览一份文件，还得去了解这版和前版有什么差别，再也没有任何事比这更令人沮丧了。采用不同工具，或者作者在文件内记录修改之处（例如，「3/20/2004，对第 6 节新增的细节」）是两种常见的方式。

2 看起来很讽刺，但这是真的。事实上，知识管理的概念，部分就是基于提供事物说明文件的观念，以免下一版无法再做下去，使得知识消失。

3 每次看见漂亮或内容很长的规范说明书，就是一种警讯。这意味着，有人对规范说明书的担心比对项目最后的成果更为在意。同样地，内容很长的规范说明书通常也是指没人会实际去看。我想，如果我要造核子武器或外科手术仪器（或者替病人装嵌入式系统），我的感觉会很不一样，但多数软件项目并不需要连绵不绝的细节层次。