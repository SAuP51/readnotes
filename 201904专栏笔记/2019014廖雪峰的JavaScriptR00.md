# 2019014廖雪峰的JavaScriptR00

## 记忆时间

2020-01-25

## 模板

### 1. 逻辑脉络

用自己的话总结主题，梳理逻辑脉络，也就是在这个专栏的整个地图里，这一章节所在的节点。

### 2. 摘录及评论

1『自己的观点』

2『行动指南』

3『与其他知识的连接』

## 总体

JavaScript 是世界上最流行的脚本语言，因为你在电脑、手机、平板上浏览的所有的网页，以及无数基于 HTML5 的手机 App，交互逻辑都是由 JavaScript 驱动的。简单地说，JavaScript 是一种运行在浏览器中的解释型的编程语言。在 Web 世界里，只有 JavaScript 能跨平台、跨浏览器驱动网页，与用户交互。

Flash 背后的 ActionScript 曾经流行过一阵子，不过随着移动应用的兴起，没有人用 Flash 开发手机 App，所以它目前已经边缘化了。相反，随着 HTML5 在 PC 和移动端越来越流行，JavaScript 变得更加重要了。并且，新兴的 Node.js 把 JavaScript 引入到了服务器端，JavaScript 已经变成了全能型选手。

1『Node.js 之前的 JavaScript 只是在客户端（浏览器）里运行的脚本语言。』

JavaScript 一度被认为是一种玩具编程语言，它有很多缺陷，所以不被大多数后端开发人员所重视。很多人认为，写 JavaScript 代码很简单，并且 JavaScript 只是为了在网页上添加一点交互和动画效果。但这是完全错误的理解。JavaScript 确实很容易上手，但其精髓却不为大多数开发人员所熟知。编写高质量的 JavaScript 代码更是难上加难。

在上个世纪的 1995 年，当时的网景公司正凭借其 Navigator 浏览器成为 Web 时代开启时最著名的第一代互联网公司。由于网景公司希望能在静态 HTML 页面上添加一些动态效果，于是叫 Brendan Eich 这哥们在两周之内设计出了 JavaScript 语言。你没看错，这哥们只用了 10 天时间。为什么起名叫 JavaScript？原因是当时 Java 语言非常红火，所以网景公司希望借 Java 的名气来推广，但事实上 JavaScript 除了语法上有点像 Java，其他部分基本上没啥关系。

因为网景开发了 JavaScript，一年后微软又模仿 JavaScript 开发了 JScript，为了让 JavaScript 成为全球标准，几个公司联合 ECMA（European Computer Manufacturers Association）组织定制了 JavaScript 语言的标准，被称为 ECMAScript 标准。所以简单说来就是，ECMAScript 是一种语言标准，而 JavaScript 是网景公司对 ECMAScript 标准的一种实现。

1『ECMAScript 是一种语言标准，而 JavaScript 是网景公司对 ECMAScript 标准的一种实现，而且只是浏览器里的实现。』

那为什么不直接把 JavaScript 定为标准呢？因为 JavaScript 是网景的注册商标。不过大多数时候，我们还是用 JavaScript 这个词。如果你遇到 ECMAScript 这个词，简单把它替换为 JavaScript 就行了。

由于 JavaScript 的标准 ——ECMAScript 在不断发展，最新版 ECMAScript 6 标准（简称 ES6）已经在 2015 年 6 月正式发布了，所以，讲到 JavaScript 的版本，实际上就是说它实现了 ECMAScript 标准的哪个版本。

由于浏览器在发布时就确定了 JavaScript 的版本，加上很多用户还在使用 IE6 这种古老的浏览器，这就导致你在写 JavaScript 的时候，要照顾一下老用户，不能一上来就用最新的 ES6 标准写，否则，老用户的浏览器是无法运行新版本的 JavaScript 代码的。不过，JavaScript 的核心语法并没有多大变化。我们的教程会先讲 JavaScript 最核心的用法，然后，针对 ES6 讲解新增特性。

## 01. 基础知识

### 1. 逻辑脉络

会简单的测试，即在 Chrome 的 Console 中运行 JavaScript 代码；JavaScript 基本的数据类型；JavaScript 基本的语法；

### 2. 摘录及评论

由 <script>...</script> 包含的代码就是 JavaScript 代码，它将直接被浏览器执行。第二种方法是把 JavaScript 代码放到一个单独的 .js 文件，然后在 HTML 中通过 <script src="..."></script> 引入这个文件：

有些时候你会看到 <script> 标签还设置了一个 type 属性。但这是没有必要的，因为默认的 type 就是 JavaScript，所以不必显式地把 type 指定为 JavaScript。

要让浏览器运行 JavaScript，必须先有一个 HTML 页面，在 HTML 页面中引入 JavaScript，然后，让浏览器加载该 HTML 页面，就可以执行 JavaScript 代码。你也许会想，直接在我的硬盘上创建好 HTML 和 JavaScript 文件，然后用浏览器打开，不就可以看到效果了吗？这种方式运行部分 JavaScript 代码没有问题，但由于浏览器的安全限制，以 file:// 开头的地址无法执行如联网等 JavaScript 代码，最终，你还是需要架设一个 Web 服务器，然后以 http:// 开头的地址来正常执行所有 JavaScript 代码。

如何找出问题代码？这就需要调试。怎么在浏览器中调试 JavaScript 代码呢？首先，你需要安装 Google Chrome 浏览器，安装后，随便打开一个网页，然后点击菜单「查看（View）- 开发者（Developer）-开发者工具（Developer Tools）」，浏览器窗口就会一分为二，下方就是开发者工具。先点击「控制台」（Console），在这个面板里可以直接输入 JavaScript 代码，按回车后执行。

要查看一个变量的内容，在 Console 中输入 console.log(a);，回车后显示的值就是变量的内容。请熟练掌握 Console 的使用方法，在编写 JavaScript 代码时，经常需要在 Console 运行测试代码。如果你对自己还有更高的要求，可以研究开发者工具的「源码」（Sources），掌握断点、单步执行等高级调试技巧。

『可以在 Google Chrome 调试 JavaScript 的代码，「视图 >> 开发者 >> JavaScript 控制台」，或者直接快捷键「option + command + J」。』

JavaScript 的语法和 Java 语言类似，每个语句以 ；结束，语句块用 {...}。但是，JavaScript 并不强制要求在每个语句的结尾加 ；，浏览器中负责执行 JavaScript 代码的引擎会自动在每个语句的结尾补上；。让 JavaScript 引擎自动加分号在某些情况下会改变程序的语义，导致运行结果与期望不一致。在本教程中，我们不会省略 ；，所有语句都会添加；。

注意花括号 {...} 内的语句具有缩进，通常是 4 个空格。缩进不是 JavaScript 语法要求必须的，但缩进有助于我们理解代码的层次，所以编写代码时要遵守缩进规则。很多文本编辑器具有「自动缩进」的功能，可以帮助整理代码。{...} 还可以嵌套，形成层级结构：

JavaScript 本身对嵌套的层级没有限制，但是过多的嵌套无疑会大大增加看懂代码的难度。遇到这种情况，需要把部分代码抽出来，作为函数来调用，这样可以减少代码的复杂度。

以 // 开头直到行末的字符被视为行注释，注释是给开发人员看到，JavaScript 引擎会自动忽略。另一种块注释是用 /*...*/ 把多行字符包裹起来，把一大「块」视为一个注释。

计算机顾名思义就是可以做数学计算的机器，因此，计算机程序理所当然地可以处理各种数值。但是，计算机能处理的远不止数值，还可以处理文本、图形、音频、视频、网页等各种各样的数据，不同的数据，需要定义不同的数据类型。在 JavaScript 中定义了以下几种数据类型：

1『7 个基本数据类型。』

JavaScript 不区分整数和浮点数，统一用 Number 表示，以下都是合法的 Number 类型：

字符串是以单引号 ' 或双引号 " 括起来的任意文本，比如 'abc'，"xyz" 等等。请注意，' ' 或 " " 本身只是一种表示方式，不是字符串的一部分，因此，字符串 'abc' 只有 a，b，c 这 3 个字符。

布尔值和布尔代数的表示完全一致，一个布尔值只有 true、false 两种值，要么是 true，要么是 false，可以直接用 true、false 表示布尔值，也可以通过布尔运算计算出来：

要特别注意相等运算符 ==。JavaScript 在设计时，有两种比较运算符：第一种是 == 比较，它会自动转换数据类型再比较，很多时候，会得到非常诡异的结果；第二种是 === 比较，它不会自动转换数据类型，如果数据类型不一致，返回 false，如果一致，再比较。由于 JavaScript 这个设计缺陷，不要使用 == 比较，始终坚持使用 === 比较。另一个例外是 NaN 这个特殊的 Number 与所有其他值都不相等，包括它自己。唯一能判断 NaN 的方法是通过 isNaN () 函数：

null 表示一个「空」的值，它和 0 以及空字符串 ' ' 不同，0 是一个数值，' ' 表示长度为 0 的字符串，而 null 表示「空」。在其他语言中，也有类似 JavaScript 的 null 的表示，例如 Java 也用 null，Swift 用 nil，Python 用 None 表示。但是，在 JavaScript 中，还有一个和 null 类似的 undefined，它表示「未定义」。JavaScript 的设计者希望用 null 表示一个空的值，而 undefined 表示值未定义。事实证明，这并没有什么卵用，区分两者的意义不大。大多数情况下，我们都应该用 null。undefined 仅仅在判断函数参数是否传递的情况下有用。

数组是一组按顺序排列的集合，集合的每个值称为元素。JavaScript 的数组可以包括任意数据类型。上述数组包含 6 个元素。数组用 [] 表示，元素之间用 , 分隔。另一种创建数组的方法是通过 Array () 函数实现：

JavaScript 的对象是一组由「键-值」组成的无序集合。JavaScript 对象的键都是字符串类型，值可以是任意数据类型。上述 person 对象一共定义了 6 个键值对，其中每个键又称为对象的属性，例如，person 的 name 属性为 'Bob'，zipcode 属性为 null。要获取一个对象的属性，我们用对象变量。属性名的方式：

变量在 JavaScript 中就是用一个变量名表示，变量名是大小写英文、数字、dollar 符号 和 _ 的组合，且不能用数字开头。变量名也不能是 JavaScript 的关键字，如 if、while 等。申明一个变量用 var 语句，比如：

这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。例如 Java 是静态语言，赋值语句如下：

1『变量类型不指定的是动态语言，而指定的是静态语言。』

和静态语言相比，动态语言更灵活，就是这个原因。请不要把赋值语句的等号等同于数学的等号。比如下面的代码。如果从数学上理解 x = x + 2 那无论如何是不成立的，在程序中，赋值语句先计算右侧的表达式 x + 2，得到结果 12，再赋给变量 x。由于 x 之前的值是 10，重新赋值后，x 的值变成 12。

要显示变量的内容，可以用 console.log (x)，打开 Chrome 的控制台就可以看到结果。使用 console.log () 代替 alert () 的好处是可以避免弹出烦人的对话框。

JavaScript 在设计之初，为了方便初学者学习，并不强制要求用 var 申明变量。这个设计错误带来了严重的后果：如果一个变量没有通过 var 申明就被使用，那么该变量就自动被申明为全局变量。在同一个页面的不同的 JavaScript 文件中，如果都不用 var 申明，恰好都使用了变量 i，将造成变量 i 互相影响，产生难以调试的错误结果。使用 var 申明的变量则不是全局变量，它的范围被限制在该变量被申明的函数体内（函数的概念将稍后讲解），同名变量在不同的函数体内互不冲突。

1『var 申明的变量为局部变量，只在该函数体内有效。』

为了修补 JavaScript 这一严重设计缺陷，ECMA 在后续规范中推出了 strict 模式，在 strict 模式下运行的 JavaScript 代码，强制通过 var 申明变量，未使用 var 申明变量就使用的，将导致运行错误。启用 strict 模式的方法是在 JavaScript 代码的第一行写上：

	'use strict';

不用 var 申明的变量会被视为全局变量，为了避免这一缺陷，所有的 JavaScript 代码都应该使用 strict 模式。我们在后面编写的 JavaScript 代码将全部采用 strict 模式。

JavaScript 的字符串就是用 ' ' 或 " " 括起来的字符表示，如果 ' 本身也是一个字符，那就可以用 " " 括起来。如果字符串内部既包含 ' 又包含 " 怎么办？可以用转义字符 \ 来标识。转义字符 \ 可以转义很多字符，比如 \n 表示换行，\t 表示制表符，字符 \ 本身也要转义，所以 \\ 表示的字符就是 \。ASCII 字符可以以 \x## 形式的十六进制表示，例如：

要把多个字符串连接起来，可以用 + 号连接。要获取字符串某个指定位置的字符，使用类似 Array 的下标操作，索引号从 0 开始。











