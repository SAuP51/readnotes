# 2021008刘嘉的概率论R01

## 记忆时间

## 0100. 上帝在投骰子

0101随机随机性不等于不确定性.md

0102概率对世界可能性的度量.md

0103独立性随机事件的相互关系.md

0104概率计算定义问题比计算更重要.md

0105概率度量建立整体确定性的三种方式.md

## 0101. 随机：随机性不等于不确定性

从这一讲开始，我们正式进入概率论这座大厦。大厦之所以能平地而起，是因为有牢固的基石存在。而概率论这座宏伟的大厦，也有四块不可动摇的基石。这一讲，我就带你了解概率论的第一块基石 —— 随机。

### 1.1 随机就是不可预测

上一讲我们说，概率论解决问题的思路，就是把局部的随机性转变为整体的确定性。这句话里，有个很重要的词 —— 随机。问题来了，到底什么是随机呢？

生活里，你肯定经常用到「随机」这个词。听歌选择随机播放时，你的意思是说，我不想知道接下来播放哪一首歌，机器帮我挑一首就行。逛街被拦下填写问卷时，对方会告诉你，他们是随机选择的，事先并不知道会选中你。打篮球投篮时，我们说这次投篮是否命中是随机的，无法预测……

我们常常用到随机这个词，但你说，到底什么是随机呢？发现了吧？我们似乎模模糊糊知道随机是什么，可是真要解释一下，好像又不太能说得明白。其实不光你说不明白，数学家们争论了这么多年，也没法给出个统一的定义。他们能达成的唯一共识就是 —— 随机就是不可预测。我们说一个事情是随机的，指的就是它发生的结果不能被预测。

2『随机，做一张术语卡片。（2021-02-10）』

### 1.2 随机性不等于不确定性

很多人，包括大部分书籍文章，都会告诉我们：随机是不可预测，而不可预测就是不确定，所以随机性和不确定性是一回事。但事实上，这两个概念并不相同。

随机性和不确定性最大的差别就在于，这个事件可能出现的结果是否可知。简单地讲，随机性是这个事件可能出现的结果我都知道，只是不知道下一次会出现哪个结果。随机播放音乐，虽然不知道接下来会播放哪一首，但歌单里总共 10 首歌，下一首肯定是这 10 首里的一首。在街上被拦下，对方不知道被选中的一定是你，但是「每走过 10 个人就拦下一个」的规则是提前设计好的，被选中的一定在这路过的 10 个人里。打篮球时虽然不知道下一次投篮会不会命中，但只有投中和投丢两种可能的结果。你看，可能的结果都是可知的。

而不确定性，是我连可能出现结果的选项都不知道。比如，我今天出门会发生什么事情，这就是不确定性，而不是随机性。因为可能发生的事太多了，堵车、下雨、碰到熟人、捡到钱…… 都可能发生，根本没法穷尽所有可能的结果。而只有知道了全部可能的结果，才能分析它们的概率；不知道可能的结果，就没法深入研究。所以说，概率论面对和处理的是随机性，而不是不确定性。随机事件结果选项可知的特性，是概率论发挥作用的基础。

本质上，不确定性包含随机性，随机性是不确定性的一种类型。拿我们熟悉的黑天鹅和灰犀牛这两个概念来说。作为无法预知的意外事件，黑天鹅就是不确定性。因为新风险的类型无法知晓，这种事情没法用概率描述。而作为可以预见的潜在风险，灰犀牛就是随机性。因为灰犀牛是已知的，你知道它很可能发生，只是不知道什么时候发生，这就是随机性。所以说，黑天鹅不是概率论讨论的内容，而灰犀牛却属于概率论研究的范畴。

1『这里才算明白之前听过的灰犀牛的概念，黑天鹅指代不确定性，而灰犀牛指代随机性。（2021-02-10）』

当然，很多不确定性是可以转变成随机性的。比如「我今天出门会发生什么事」这个问题，可能的结果没法穷尽，是个不确定性的问题。但如果把问题修改一下，「今天出门遇到的第一个人，是我认识的还是不认识的呢」，就把不确定性的问题变成了随机性的问题，变成了可能遇到认识的人和不认识的人的概率问题了。

尽量把不确定的问题，转变为随机的问题，用概率去研究，就是对付它们的科学方法。

### 1.3 真随机、伪随机和效果随机

知道了随机是不可预测，也知道了随机不等于不确定，接下来咱们深入到随机的内部，看看我们说的到底是哪个层面上的随机。

最高层面的随机当然是真随机，它在逻辑上就是绝对不可预测，这也是数学上的理想状态。世界上有没有这种绝对不可预测的现象呢？如果你去问物理学家，得到的答案可能是四个字 —— 量子涨落。啥意思呢？简单来说，量子理论的「测不准原理」允许空无一物的空间产生少许能量，这个能量的诞生是完全随机的。这个理论很复杂，你不需要深究它的意思，只要知道这个世界可能真的有真随机就好了。

现实生活中，这种绝对意义上的真随机几乎无法遇到。就如同「圆」这个概念，数学上，我们可以定义一个标准圆；但在现实世界，永远见不到一个绝对标准的圆。无论你画得多精准，肯定都有误差。但是没关系，只要从效果上来说是圆形的，我们就可以认为它是圆的。所以虽然不是绝对意义上的圆，我们仍然说硬币是圆的、井盖是圆的、「天宫一号」的对接口是圆的。

随机也是一样。绝对意义上的真随机很难获得，我们日常生活里打交道的，基本都不是绝对的真随机，而是另一个层面的随机 —— 效果随机。也就是说，虽然不是绝对意义上的随机，但只要我们感知到它的效果是随机的，就可以把它当随机来看待。比如前面举的投篮的例子。影响投篮是否命中的因素很多，像出手的角度、力度、速度、球的旋转、当时的风向等都有影响。如果把所有这些因素全部控制在适当的范围内，投出去的球就必然入筐。这时候结果就是确定的，而不再是随机的了。

但这种情况实在太难了。现实中，我们既没有办法完全控制出手时力量的细微差别，也没办法完全计算风向、空气密度这些环境因素的影响，所以投篮是否命中这件事对我们来说，仍然是随机的，我们把它视为效果随机。同样的，抛硬币、掷骰子的例子，也都是效果随机。

再说一遍，我们在现实生活里遇到的各种随机问题，基本都是效果随机。和真随机、效果随机对应的，生活里还有一些现象是典型的「伪随机」。就是说，这个事件看起来是随机的，但其实不是，我有证据证明它不是效果随机。怎么证明？当然是寻找规律。只要一件事是伪随机，它就一定有规律。

比如，石头剪刀布这样的游戏，出石头、剪刀还是布，每个人都有自己的规律，很难做到效果随机。一旦发现了这个规律，也就证明了它是伪随机。猜拳比赛中，水平高的选手就是能发现对手看似随机出拳中的规律罢了。这也是为什么我想使唤女儿干什么，或者不想让她玩 iPad、不想让她吃冰激凌的时候，总是跟她玩石头剪刀布的游戏。因为她的出拳规律很容易被我识破，我很容易就能赢她。当然，我希望我女儿听不到这一讲。事实上，人类是很差劲的随机生成者。我们越想制造随机，我们的主观性就越强，这样制造出来的随机，往往就是伪随机。

简单总结一下，绝对意义上的真随机存在于量子层面，现实中很难遇到；伪随机只是披着随机的外衣，它本身是有规律的；而我们现实中遇到的大部分现象，都是效果随机，这也是概率论这门学科研究的重点。

### 1.4 随机是世界的决定性力量

不管是真随机、效果随机还是伪随机，我们需要知道的是 —— 随机是这个世界决定性的力量。怎么解释这种力量的作用呢？我们举两个例子。

第一个例子，还说上一讲讲到的网球冠军费德勒。比赛里，费德勒的相对弱点是左手。因为接反手球时，大部分网球运动员是双手击球，而费德勒是单手击球。虽然单手反手速度快，但回球的力量相对较小。如果你大力给费德勒反手球，就会降低他回球的质量。怎么利用这一点呢？是不是要一直给他反手呢？

不是的。如果一直给他反手，他就能预测你的进攻，然后做出调整。你能利用的唯一机会，就是随机性。给他一定的正手、一定的反手，不让他知道你什么时候给反手，他就更可能暴露弱点。你看，这就是用随机性战胜对手的例子。

再举一个例子。我们知道，基因突变是随机的，但如果人类发明了抗某种害虫的转基因作物，会出现什么情况呢？在生存压力下，害虫会快速通过基因突变，有目的地进化出对抗这种抗虫性的能力。这样一来，这种转基因作物的抗虫性就失去了效果。我们该怎么办呢？

从随机的视角来看，我们应该在转基因作物的旁边开辟一块正常的区域，种上非转基因的作物，给害虫留一条出路，让害虫在这个正常的区域中继续进行随机性的基因突变。这就大大降低了它们进化出抗虫性的概率，这种转基因作物就能持续有效。你看，这也是利用随机性战胜对手的例子。

所以说，了解随机，你才会懂得随机的力量，才会更好地利用随机做出正确决策。至于我们该怎么度量和量化这些随机性呢？我们下一讲再说。

### 黑板墙

思考题：微信里的拼手气红包，你抢到的红包里的钱数是随机的吗？

#### 01

首先我的结论是有规律的，并且我们做了实验。我们用微信红包的测试软件做了五十万次的测试，得到了一个有规律的但又令人发指的结论：1）首先，最后一个抽红包的人，抽中的额度会普遍偏高。2）尴尬的是，当你老谋深算的想最后一个去抢红包时，往往你会抢不到。3最）后补充一下，我们电脑软件比如 MATLAB 里的随机事件函数：random 等等，都是伪随机。

作者回复：躬身下场，这是用数学对象（概率）进行数学建模（统计），最值得夸耀的素质。

#### 02

微信红包肯定不是随机的。虽然我不懂计算机科学，但觉得只要有算法，有硬件，软件等制约，就要么是效果随机，要么伪随机。另外最著名的例子恐怕就是苹果公司 iPod 最早推出「随机播放」功能的时候，用户发现有些歌曲会被重复播放，他们据此认为播放根本不随机。苹果公司只好放弃真正的随机算法，用乔布斯本人的话说，就是改进以后的算法使播放「更不随机以至于让人感觉更随机」。其实我现在突然怀疑哪怕是乔布斯最初推出的「随机播放」功能，真的是随机的吗？

作者回复：有限状态机是不能产生真随机的，所以计算机中的随机是伪随机发生器。效果随机一般需要和物理现象相关，比如硬币、骰子、转轮、裂变等等。计算机可以采集一些物理信息，达到或者尽可能接近效果随机，比如鼠标运动轨迹作为种子，通过电阻和振荡器生成热噪声等等。

#### 03

关于效果随机和伪随机，是否同一个行为，对于不同的人来说是不同的呢？比如和女儿猜拳，对于您来说属于伪随机，而如果她跟另个小朋友猜拳，就成了效果随机？还比如，同样预测网球赛胜负，我从来不看网球，对于我就是效果随机；可能一个对网球以及比赛双方球员研究极深甚至用上了人工智能分析的人，对于他就成了伪随机问题。请教刘老师。

作者回复：从客观上，伪随机是可以寻找规律的状况。从主观上，虽然是伪随机，但你找不到规律，对你来说，可能就是效果随机了。

#### 04

随机性不等于不确定性，而是相对确定的范围内，「出现」一个无法预测的具体结果。从这个角度讲，微信拼手气红包是在确定的总金额内，出现一个用户事先无法预测的具体数值。但这只是结果「看上去」像是随机，实际上每个红包里有多少钱，是一个基于某种特定计算方法生成的数字。尽管我们并不知道算法具体是什么，但基于这种算法的「规律」客观存在，它其实是一个伪随机过程，是用算法规律制造出「效果随机」的假象。类似的还有，比如支付宝的「蚂蚁森林」里，用户可以从好友那里「偷能量」，每个能量球最多只能被偷走一半，但具体能获得多少，也是通过算法得到的结果，是人为赋予一种规律，来模拟效果随机。

作者回复：抽象一点说，不涉及物理随机产生装置的，大都是伪随机。

#### 05

如果一直给他反手，他就能预测你的进攻，然后做出调整。你能利用的唯一机会，就是随机性。给他一定的正手、一定的反手，不让他知道你什么时候给反手，他就更可能暴露弱点。你看，这就是用随机性战胜对手的例子。留言：老师，看到这一段关于打网球的策略时，我更多想到的是博弈论，为了贏费德勒，我们可以策略性的使用随机性让费德勒暴露反手缺点费德勒也清楚这一点的时候，费德勒应该采取怎样的策略来应对「随机性」呢。还有一个问题向老师请教一下哈，概率论和博弈论在学科上是否有重叠的部分，在什么情形下我们应该用概率论的知识去「解题」，什么情形下用博弈论的视角去「处理问题」。

作者回复：在使用随机的力量上，所有学科都是一致的，毕竟量子物理告诉我们，随机是这个世界的底色。

#### 06

万老师在你有你的计划，世界另有计划书中说到，「一切都是确定的，哪有什么随机性可言？」比如抽签，为什么你抽中了这个签？那是因为你手的动作。你手的动作，是你大脑中某个电信号決定的。你的大脑里之所以会有那个电信号，是因为你当时想到了什么东西。你之所以想到那个东西，和你昨天晚上做的梦有关。你之所以会做那个梦，又是你以前的经历決定的。总而言之，有果必有因，你也是物理世界的一部分，一切都是确定的。

作者回复：目前来看，物理的微观世界是不确定的，到底是决定论还是随机论？目前随机论解释力更强。效果随机的意思是，宏观上我们无法预测，把它看成随机，用概率处理可能性的度量。

#### 07

石头剪刀布」这种游戏，它的规则十分简单、也很容易操作。事实上，在当今社会上，很多事情我们都会通过摇号、抽签的方式来解決，也是运用了「石头剪刀布」的随机的思维方式。而「石头剪刀布」之所以被人广泛接受并流行，最重要的原因就是它的相对公平性，三者一物降一物，一目了然；选择石头剪刀布、或者是掷骰子，就是把裁決权交给随机性，既方便又公平。选择随机性、接受命运的安排，每个人每次都有 50% 的可能性贏；只要时间足够长，大数定律会确保参与这种博弈的每个人、谁也不会吃亏。虽然这种方式只是效果随机、并非真随机；但却是相对公平的好方法。所以，我们现代人有的时候就是太相信科学、也太相信自己，而对随机性用得太少了；其实，把裁決交给随机的命运，有时候也不失为解決问题的一种好方法。

作者回复：古代的巫师占ト，就是这个路数。当我们无法控制的时候，交给随机，本身就是一种解決问题的思路。我就经常和女儿掷骰子決定谁去拿快递。

#### 08

有些疑惑，概率论是建立在效果随机上的吗？因为您说真随机是不可预测的，这点没有想明白，如果真随机已经穷尽所有结果，为什么还不可预测？今日得到：一直以为随机和不确定性是一回事，今天才明白不确定性跟随机最大的区别是，对结果有没有确定性。

作者回复：穷尽所有结果，我却不知道下一次究竟是哪种结果，这就是不可预测。而我唯一可知道的是下一次出现某种结果的可能性，对这种可能性的度量，就概率。

#### 09

卓老板的密码学课说过，这种播放歌曲的人造伪随机叫「同余随机」。这里请教一下刘老师，您讲的投篮等效果随机是不是也有可能其背后有规律可循，只是我们不知道罢了？如果我们只是不清楚其背后的规律，是否还能用概率的方法去评估呢？

作者回复：投篮基本和抛硬币类似，你很难精准定出手的所有细微变化，都是效果随机，但是投篮是可以通过努力改变概率，而抛硬币不行。

#### 10

我有一个问题，困抗许久。多数书籍讲随机都是解释随机现象，没有解释随机现象出现背后的深层次原因，你能不能解释一下。

作者回复：波尔表示量子随机就是个事实没有原因。效果随机是，影响因素太多，很多影响因素的作用下，每一个随机事件的结果不知道、不能、不值得随时计算。但整体呈现可被研究的规律。

## 0102. 概率：对世界可能性的度量

上一讲，我们学习了概率论的第一块基石 —— 随机。只有弄明白了随机，才能理解我们这一讲要讲的概率论的第二块基石 —— 概率。这门课的名字叫「概率论」，简单说就是「论概率」，就是对概率的讨论。所以你看，「概率」是不是整个学科最基石的概念？这一讲，我们就把这个基石性的概念一次性说清楚。

### 2.1 概率是随机事件发生可能性的定量描述

「概率」的定义有很多，最经典的就是，柯尔莫哥洛夫于 1933 年给出的公理化定义。柯老师是现代概率论的奠基人之一，他的定义如下：设 E 是随机试验，S 是它的样本空间。对于 E 的每一事件 A 赋予一个实数，记为 P(A)，称为事件 A 的概率……

1-2-3『柯尔莫哥洛夫，这个大牛有印象的，在《女士品茶》里见过，俄罗斯人，统计学里功力可与费歇尔比肩的大牛。才知道原来是他给「概率」下了一个明确的定义。概率是随机事件发生可能性大小的定量描述，做一张主题卡片。（2021-02-10）』已完成

打住，我知道你已经懵了。不过，我不打算用抽象的数学定义给你讲概率，这一讲不会，整门课也不会。形式化定义和公式是数学家的交流语言，可以准确、方便地传递复杂内容，甚至在我看来极具美感。但是，当你对这种语言不熟悉的时候，就很难理解它。数学不是抽象游戏，而是要解决现实问题。对现实世界的理解和其中孕育的思想，才是数学真正的魅力。所以我给你个方便理解的定义 —— 概率是随机事件发生可能性大小的定量描述。

这个定义有两个关键词，第一个是「随机事件」，第二个是「可能性大小的定量描述」。

先说「可能性大小的定量描述」，什么意思呢？生活里我们说，网坛名将费德勒很厉害，夺冠的概率很大。这肯定没错，但是不精确，很大是多大呢？哎，概率就是用一个数字来描述这个可能性的大小。比如，这一场费德勒赢的概率是 80%。这就是一种定量的描述，就能和其他人比大小，我们也就知道谁最可能夺冠了。

回过头，再看刚才说的第一个词 —— 随机事件，在概率论中也简称「事件」。别被它的名字搞混了。虽然都叫「事件」，但它是个概率论的概念，和我们生活里说的「xx 事件」，意义完全不一样。生活里，日本偷袭珍珠港、抗日战争爆发…… 都叫「事件」，是指一个已经发生的事情。而概率论中说的随机事件是什么呢？咱们看几个例子：

我们问「这一场费德勒赢的概率是多少」，那「这一场费德勒赢球」就是一个随机事件；我们问「下一次掷骰子出现 6 的概率是多少」，那「下一次掷骰子出现 6」就是一个随机事件；我们问「今年村上春树得诺贝尔文学奖的概率是多少」，那「今年村上春树得诺贝尔文学奖」就是一个随机事件。

本质上，随机事件是概率论的一种表述方式。只有符合这种表述方式，我们才能度量它的概率。这是一种怎样的表述方式呢？任何你关心的事情，只要设定一个条件，从可能性的角度出发，对某一个发生结果进行陈述，就可以转化成随机事件，然后度量概率。这句话很长，限定条件很多，我一一解释。

第一点限定，设定一个条件。前面的例子，这一场费德勒赢球的「这一场」，下一次掷骰子掷出 6 的「下一次」，今年村上春树得诺贝尔文学奖的「今年」，都是限定条件。这些是必须的。你不能不加限定地说「人类登上火星的概率」，这就没法计算，而「人类在 2050 年登上火星的概率」，加上时间设定「2050 年」，就可以计算概率了。

第二点限定，从可能性的视角出发。要么，是这事儿还没发生，比如「明天下雨的概率是多少」，明天还没到，我们只能从可能性的角度提问。要么，是这件事已经发生了，但我还不知道，比如「现在我家地底下有石油的概率」，现在我家地底下有没有石油，这是个客观事实，只是我不知道，也可以预测概率。你看，不管是这件事还没发生，还是单纯的我不知道，只要是我还不确定结果，就可以从可能性的视角提出问题，度量它的概率。

第三个设定，对某个发生结果的陈述。也就是说，陈述的必须是一个随机结果，而不是不确定性。上一讲说了，随机不等于不确定，概率论能解决随机问题，但不能解决不确定的问题。

只要按照上面三个设定表达 —— 第一，限定一个条件；第二，从可能性的视角出发；第三，对某个发生结果进行陈述，任何事情都可以变成随机事件。再结合刚才「发生可能性大小的定量描述」，我们就明白了概率的第一层意义 —— 概率，是对随机事件发生可能性大小的定量描述。

### 2.2 概率是随机事件在样本空间的比率

知道了「概率是对随机事件发生可能性的定量描述」，我们就会面临一个新问题 —— 这种定量描述是怎么来的？

你可能会说，就是那些让人头大的复杂计算呗。没错。但我要告诉你，计算虽然复杂，但它们背后的思路却是一致的，就是计算随机事件在样本空间的比率。这里又有了一个新概念 —— 样本空间。其实很简单。一件事儿可能发生的所有结果，就是这件事儿的样本空间。在数学上，常常用集合来表示，所以叫「空间」。

比如抛硬币，结果不是正面就是反面，那么「结果是正面」和「结果是反面」就构成了抛硬币这件事的样本空间。再比如，每届世界杯有 32 支球队参赛，虽然我们不知道谁会夺冠，但夺冠的队伍无外乎就这 32 支，这 32 个结果就构成了世界杯冠军这件事的样本空间。是不是很简单？

在集合的定义下，随机事件是样本空间的一个子集，属于样本空间的一部分。拿掷骰子来说，每次掷骰子可能的结果有几个呢？6 个嘛，就是 1 点、2 点、3 点、4 点、5 点、6 点。这六个结果，就构成了掷骰子这件事的样本空间。不管是像「点数是 1」「点数是 2」这样单一的不能再分的结果，又称为「基本事件」，还是「点数是偶数」「点数是奇数」这样一组结果的集合，都是样本空间的一个子集，都是样本空间的一部分。换句话说，随机事件就是样本空间的一个子集；反过来也成立，样本空间里的每一个子集，也都是一个随机事件。现在你明白「随机事件」和「样本空间」的关系了吧？就是子集和全集的关系。

而子集和全集的比率，也就是随机事件占样本空间的比率，就是这个随机事件发生的概率。掷骰子，样本空间是 1-6，共六个结果，掷到 1 点的概率，就是 1 这个结果在总共六个结果中所占的比例，也就是 1/6。正因为是个比率，所以概率是没有单位的，就是一个数。

有了这层含义，我们就能推导出概率的三个性质 —— 1）概率永远在 0 和 1 之间，不可能是负数。2）样本空间里所有基本事件概率之和是 1。样本空间就是所有可能发生的结果的集，它们的概率加一块必然是 100%，也就是 1。一定不会出现样本空间里所有基本事件的概率之和小于 1 或者大于 1 的情况。3）某个随机事件不发生的概率，等于 1 减去这件事发生的概率。比如，世界杯巴西队夺冠的概率是 21%，那巴西队不夺冠的概率就是 `100%-21%=79%`。

当然，在数学定义中，概率有一个完整的公理体系，我这里就不一一说了，你了解这三个基本性质就可以了。

1『上面的信息补充进主题卡「概率」里去。（2021-02-10）』——已完成

### 2.3 样本空间的完备性是一个幽灵

到这里，你对概率的理解已经超过 90% 的人了。但这一讲最后，我还想多说一点：因为概率是随机事件在样本空间中的比率，所以我们计算概率的前提是什么？当然就是保证样本空间的完备性。也就是说，要找到所有可能发生的结果。如果样本空间压根不完备，那你算出的概率一定是错的。但问题是，样本空间的完备性是一个幽灵。像每年的「奥斯卡最佳影片奖」，都会从入围的几部电影中评出一部最佳影片。你考虑了所有这几部电影，估算了每部电影得奖的概率，所有概率加起来也恰好是 1。你觉得这个样本空间没问题吧？不，问题很大。

比如，万一当年的最佳影片空缺了呢？这不是不可能的。像 2018 年的诺贝尔文学奖，当年就没有评；2015 年度我国国家最高科学技术奖，一等奖也没有评，空缺着。你把「空缺」这个结果放到样本空间中考虑了吗？再比如，万一当年的最佳影片有并列的呢？这也不是不可能。近 20 年来，被誉为「中国奥斯卡」的金鸡百花电影节，最佳故事片、最佳男女主角就经常是「双黄蛋」，2 部或两人并列。你把「并列」这个结果放到样本空间考虑了吗？

所以，样本空间的完备性就像一个幽灵，很难获得。而如果样本空间不完备，我们计算的概率就会有偏差，决策就会出错。明白了这一点，你就会理解很多现实问题。比如经济领域中的「黑天鹅事件」，它的本质是什么呢？黑天鹅之所以无法预测，本质就在于我们完全不知道它，它压根不在我们的样本空间里，所以没法计算它的概率。只有它发生过了，我们知道它可能发生了，它才会进入我们的样本空间，它的概率才能被计算。

更深入一点，从某种角度来说，我们对世界的认识，就是对样本空间完备性的认识。原子衰变到底能放出多少种粒子？决定恒星运动的力到底有多少种？影响股票涨跌的因素到底有多少种？每一次突破性的进展，其实都是在完善我们的样本空间。

### 黑板墙

思考题：你有没有遇到过決策时忽略了样本空间的完备性，结果导致失败的经历呢？

下节预告：说完了随机和概率，下一讲，我们一起看看概率论的第三块基石一一独立性。

#### 01

从某种角度来说，我们对世界的认识，就是对样本空间完备性的认识，觉得就凭这句话给我带来的认知升级，就已经值回课程的价格了。当很多事情发生时，为什么我们会觉得吃惊，就是因为发生的事情不在我们原有的「样本空间」之内，我们的「样本空间」不是完备的。为什么我们经常形容很多人「处变不惊」，「有大将风范」，那是因为他们的样本空间足够完备，所有发生的事情要么他已经经历，要么已在他的考虑范围之中，只是概率大小的问题。这次的新冠疫情，一定会增加很多人的样本空间，例如，很多餐厅在此前并没有留够 6 个月以上的现金流，因为疫情长期关闭餐厅并不在他们的样本空间之内。我们为什么要终身学习，为什么要在得到上学各种通识课程，也就是不断的增加我们的样本空间，其实很多事情的样本空间是永远都不会 100% 完备的，因为总可能会「百密一疏」，我们能做的就是持续精进。

#### 02

万维钢老师讲过的伯克森悖论就是典型的忽略样本空间的完备性而导致得出两个変量之间错误的负相关性：1）澐亮的姑娘不聪明，聪明的姑娘不漂亮（忽略了既不聪明又不漂亮的姑娘）。2）成绩好的学生一定是「高分低能」的学生（忽略了成绩不好能力有差的学生。3）通俗的电影没有深度，有深度的电影不通俗（忽略了既没有深度又装模作样的闷片）。

#### 03

打篮球的时候防守，觉得进攻方要么突破要么投篮，结果来了个假突真传球，超出了第一反应的样本空间。

作者回复：所以，视野、大局观、出乎意料的传球。这些都是他的样本空间更加完备。认知的提升，所谓行万里路读万卷书，不就是不断提升自己样本空间的完备性吗？一起加油。

#### 04

从某种角度来说，我们对世界的认识，就是对样本空间完备性的认识。反过来说，我们随时要认识到样本空间不可能完备，一定要对没有考虑在内的样本空间做好准备。举个例子，在技术领域现实永远比理论分析要复杂。作为汽车工程师，在解決一些汽车质量问题的时候，在一些比较特殊的情况，从理论上可以分析出所有因素。然后去ー一确认，会发现全部确认完以后问题还是解決不了。经过一番艰苦卓绝之后，发现总会有我们考虑不到的因素出现。

作者回复：我能体会探索问题的艰苦，和进一步有进一步的欢喜。

#### 05

我想提个建议：数学的基石是体系的，是不可以有误差和错误的，是完全正确的逻辑。不然也不会一个定理去证明三百年。它的严谨性是需要把握。我建议此讲，还是把概率的严肃定义和古典定义都附在后面。凡是有初中学历的人，看懂是没问题的。虽然是通识课，我还是希望能感受到一定的逻辑和严肃的根本魅力。

作者回复：谢谢，我正在做严格数学逻辑定义，做一个附录作为加餐提供。

#### 06

这次疫情也算是一个样本空间预估不足的教训吧，公共医疗体系中对于大流行病的管理由于各种技术、管理的惯性、既有认知能力等因素带来结果预测不准确，以至于带来灰犀牛的结果。所以医疗措施未来需要和概率结合，也许更有效。人工智能面临的对人的威胁的争论，其实也是各种样本空间支持者的争论，未来的시对于人类的影响，其实我们的样本空间也是极其有限的，所以有人乐观，但霍金等科学家就发出了警告。样本空间的数量置于社会发展与生活中，也就在「逼迫」着我们要考虑周到和完善，尽量别除主观偏向。

#### 07

从某种角度来说，我们对世界的认识，就是对样本空间完备性的认识」这句话是我感觉是目前看到概率论和世界关系最精准的一句话了，我也想请教一下老师之前我了解过哥德尔不完备性定理的概念虽然不是很深入但数学公理化体系本质是否就像老师说的追求完备性是一种灵这种感觉呢。

作者回复：数学公理化的本质都是正确的，使用数学的学科，构建的是领域知识。可以理解成，就是在数学的基础上构建自己研究问题的完备的样本空间。

#### 08

马云爸爸喜欢给大家喝鸡汤，比如「我永远相信只要不放弃，就还有机会」等等。包括很多其他的名人名言，用波普尔的话说，那些鸡汤都是可证伪。所以我认为，我们其实是生活中一个概率的世界里，用概率的思维理解世界才是更准确的，值得推崇的。

作者回复：在概率劣势下的坚持，就是深深的噩梦。

#### 09

我在概率与数理统计的教科书看到，说主观概率也符合概率论的三条公理。在实际工作中，比如医生诊断疾病时会首先根据病情特点、经验与观察形成多个诊断假设，估计可能性时，会要求这些假设的和等于 1，然后通过各种验证来逐个确定或排除假设，最后得到诊断。但事实上，形成主观假设的过程有时候是比较随意的，好像很难和经典概率的数学公理对应起来。

作者回复：贝叶斯中会详细讲，概率的公理系统是符合全部的概率度量方法的。

## 0103. 独立性：随机事件的相互关系

了解了概率论中随机和概率这两个基石之后，这一讲，我们学习概率论的第三个基石性概念 —— 独立性。这个概念很重要，因为它描述的是随机事件之间的相互关系。只有明白了一个随机事件和其他随机事件的关系，判断它们之间是否具有独立性，才能正确分析和度量它的概率。

### 3.1 随机事件的两种关系

什么是「独立性」呢？通俗地讲，如果随机事件之间没有任何关联，我们就可以说这些随机事件是相互独立的，它们之间就具备独立性。而这种具备独立性的随机事件，也被称为「独立事件」。

好像有点儿抽象，举个例子你就明白了。比如，今天晚上你想吃火锅，可是你女朋友想减肥，她提议吃蔬菜沙拉，然后你们抛硬币决定，正面就吃火锅，反面就吃沙拉。第一次，你抛了正面，你女朋友说没开始呢，让你再抛；第二次，你又抛了正面，你女朋友说这只是试试，不算。也许是冥冥之中火锅店老板庇佑，你连续抛了 5 次都是正面。你女朋友惊呆了，她说，最后一次，再抛个正面我们就去吃火锅，如果是反面，你还得陪我吃沙拉。

问题来了，今天晚上你们到底更可能吃火锅呢？还是更可能吃沙拉呢？也就是问，第 6 次抛硬币，结果是正面的概率是多少呢？你可能觉得，都连着扔了 5 次正面了，这一次硬币出现正面的概率肯定更小，出现反面的概率更大了。这个判断对吗？不对。这就是我们常听到的「赌徒谬误」。当然，你也可能会逆向思维，知道既然前 5 次都是正面，下一次很可能继续是正面。这个判断对不对呢？抱歉，也不对，这就犯了另一个错误，叫「热手谬误」。

1『看到这里，目前知识储备的解读，第六次还是正面的概念跟有没有发生相关。1）前面已经发生了的，不用管，也就是上面的情况，第六次还是正面的概率是 1/2。2）如果一次没抛，问你抛 6 次，6 次全是正面的概率是多少，是 0.5^6。（2021-02-11）』

概率更大也不对、更小也不对，那正确答案是什么呢？我来告诉你吧 —— 第 6 次抛硬币，结果是正面的概率还是 1/2。第 6 次抛硬币跟前面几次抛硬币是相互独立的，不管前 5 次结果怎样，第 6 次出现正面的概率都还是 1/2。这一次抛硬币的结果，不会影响下一次的结果。这就是独立性。抛硬币是一个典型的独立事件。

两个随机事件相互独立，在概率论中说的就是，一个随机事件的发生，不影响另一个随机事件发生的概率。也就是说，下一个随机事件发生的可能性，不会被上一个随机事件所影响。这就是随机事件之间的独立性。而如果两个随机事件之间有影响，那它们之间就是非独立的。

要么具有独立性，要么具有非独立性，概率论研究的所有对象 —— 随机事件之间，只有这两种关系。

### 3.2 独立性的重要意义

到这里你可能会问，知道独立性的定义干嘛？辨别随机事件的独立性有什么意义吗？

为了说明独立性的作用，我们再举个例子。我和我女儿猜拳，前面的课程里说过，我女儿是一个非常差的随机制造者，我发现她每次出石头之后，下一次一定出布。她以为自己每次出拳都是随机的，而我早就发现了这个规律，并且总是靠这个规律赢她。

这个规律代表什么呢？其实，用概率论的语言表达就是 —— 我女儿上一次出拳的结果，影响了下一次出拳。当她上一次出了石头，下一次出拳就不再是石头、剪刀、布各 1/3 的概率了，而是变成了出布的概率是 100%。你看，两次出拳并不具备独立性，而是相互联系、互相影响的。这种会产生相互影响的随机事件，也叫「非独立事件」。因为我女儿前后两次猜拳之间相互影响的规律被我发现了，我就可以通过猜拳使唤她做很多事情。

你看，原本互相独立的事件，当你发现它们之间有关系的时候，对概率的估计、决策的方式都会发生很大的改变。换个角度，我女儿有没有什么对付我的办法呢？如果恰好学习了这一讲，她就会知道，最简单的方法就是打破自己出拳的规律，让每次出拳的结果不会相互影响。这样她每次出拳的结果又是独立事件了，我就拿她没办法了。当然，我希望她不要那么快想到这个办法。

### 3.3 事件的独立性本质上是一个数学概念

听起来挺简单的，但是在现实中，我们真能这么轻松的辨别独立事件吗？事实上，识别随机事件的独立性是非常困难的。给你说个故事，真事儿。2013 年，英国德比郡一个叫约翰的人，在超市买了一小盒鸡蛋，共 6 个。磕开第 1 个，约翰惊喜地发现这是一个双黄蛋。这是他有生以来第一次碰到双黄蛋。接着他又磕开了第 2 个，又是双黄蛋。更神奇的是，约翰接下来又连续磕开 3 个，都是双黄蛋。他欣喜若狂，一不小心把最后一个鸡蛋摔在了地上。见证奇迹的时候到了，这还是一个双黄蛋。

约翰一下买到 6 个双黄蛋的奇闻，被媒体争相报道。英国有机构的数据显示：母鸡平均每下 1000 个鸡蛋，才会出现 1 个双黄蛋，也就是说，双黄蛋的概率是 1/1000。那么，一盒里 6 个都是双黄蛋的概率是多少呢？如果我们假设，盒子里这个鸡蛋是双黄蛋和那个鸡蛋是双黄蛋，是完全的独立事件，两者毫无关系。那么连续 6 个都是双黄蛋的概率，就是每个鸡蛋是双黄蛋的概率的乘积，就是 1/1000 的六次方，也就是 10 的 18 次方分之一。

10 的 18 次方分之一意味着什么呢？假如你每秒磕开 6 个鸡蛋，现在让你每秒 6 个、每秒 6 个的磕，要磕多久才能保证，在某一秒里 6 个鸡蛋都是双黄蛋的情况，至少出现一次呢？大约 317 亿年。要知道，宇宙从大爆炸到现在也就是 138 亿年。这个时间是宇宙年龄的两倍多。你说，这是多么罕见的事情啊。那这个约翰是不是史上最幸运的人呢？还真不是。因为约翰并不是宇宙诞生以来连续磕出 6 个双黄蛋的第一人。就在 3 年前，在英国另一个地方，还发生过一次几乎一模一样的事情。

按说，理论计算不应该和事实有如此大的差别。这不禁让我们困惑，问题出在哪儿呢？会不会是这么计算有问题呢？还记得这种计算方式的前提吗？对，就是我们一开始的那个假设 —— 同一个盒子里，这个鸡蛋是双黄蛋，和另一个鸡蛋是双黄蛋，是独立事件。也许这个假设是错的。

首先就有专家提出质疑，母鸡下双黄蛋的概率受自身年龄的影响。越年轻的母鸡，下双黄蛋的概率越大。一只刚开始下蛋的母鸡，下双黄蛋的概率要远远高于 1/1000。而在现代化的农场里，母鸡是分批次养殖的。同一批母鸡，会在相同的时间长大、开始产蛋。所以如果恰好买到这批年轻母鸡下的蛋，出现双黄蛋的概率就要大得多。

另一方面，我们都知道，鸡蛋大小不同，往往售价不同。所以无论是工作人员，还是自动化机器，在分拣包装鸡蛋时，往往会区分大小，把大个儿的放在一个盒子里。这样，只要盒子里第一个放进去的是大个儿的鸡蛋，后面几个也放大个儿鸡蛋的概率就会大大增加。而双黄蛋普遍比一般鸡蛋个头大，在芸芸众蛋中十分显眼，所以被捡到一个盒子里的概率就会大幅度提升。

你看，很多我们以为的独立事件，也许并不具有独立性。像这个鸡蛋是双黄蛋和那个鸡蛋是双黄蛋，这样两个看起来毫不相关的事件，都因为鸡蛋个头的大小，被扯上了千丝万缕的联系。

现在你明白了吗？独立事件，只是我们描述某些随机事件的数学模型罢了。这种数学模型，可能真的是因为这些随机事件之间没有关系，不互相影响；也可能是因为一些随机事件存在内在联系，但我们并不知道；还有一种可能就是，假设这些随机事件之间相互独立，可以简化我们对概率的计算。但不管怎样，在现实生活中，判断随机事件是否独立时要格外小心。很多情况下，如果错把互相影响的事件当成了独立事件，就会得出离真相很远的答案。

回到最开始男女朋友抛硬币决定吃火锅还是沙拉的例子。如果男朋友抛了 100 次都是正面，你觉得下一次会是正面还是反面呢？概率还都是 1/2 吗？不。这时候，你就不应该还假设两次抛硬币是互不影响的独立事件了，而是要检查男朋友抛的那个硬币是不是有问题。

### 黑板墙

思考题：现实生活中，你还能找到貌似是相互独立的事件，其实是相互影响、相互联系的吗？

下节预告：搞清楚了随机事件的关系，我们就可以对一个随机事件的概率进行计算了。下一讲，我们就学习一下概率论大厦的第四个基石 —— 概率计算。

#### 01

行为心理学中的锚定效应，就是通过引入参照物，从而改变了你对事情的预期和看法，让看似相互独立的事件，变成了个条件概率。比如当你感到冷的时候，我让你估计当地的平均气温，你的答案往往要比正确的气温低一些。人的本能也总是让我们远离独立性。比如魔术师给你面前摆 4 张牌让你抽，你总是有更大几率会去拿中间两张。如果魔术师碰巧把 1 张牌摆的更靠近你，你也会有超过 1/4 的可能去拿那张牌。而且，越是重要的时刻，你越会按直觉行事。坏运气也会传染。比如在足球比赛的点球大战中，如果第一个出场的球员把球踢飞了，那后面出场的本方球员，有相当大的可能性也会犯类似的错误。因此，教练总是安排最有把握的那个人第一个出场，他不相信球员射门这个事件是相互独立的。

作者回复：一切都是条件概率。

#### 02

6 次已经值得我们深想一步，这「硬币」是不是有问题了。（不过「6 次朝上」的概率，其实并没有直觉的那么小）此条规则普遍应用到生活中的重要決策下。用「利益关系」去衡量下对手与自己的关系后，我一般会选择不玩。「双黄蛋」的例子很吸引人，但让我想到了另外一个维度：虽然出现一次需要 317 亿年，但这是只考虑单个人操作的情况下，如果全球 80 亿人都能吃上鸡蛋，这个数字也会有数量级的下降。赌场中的单次赌局，一般都是「独立事件」。但是，能够「长期并稳定」的在赌场中赚钱的人，一定不是「赌徒」。推广到资本市场，能够长期在股市中赚钱的人一定靠的不是「运气」。战胜库里的方法只有两个：1）只跟库里比投 1 球，而不是 3 个，4 个或是更多。（虽然这也比较渺茫，但却是有可能实现的方法）。2）或者试试跟他打乒乓球。

作者回复：1）概率占优，长期竟争；概率劣势，2）決一死战。战不过，换战场，商业领域也是一样。

#### 03

大学生考研是有一定升学率的，平均到每个考生是一个低概率事件，而一个宿舍 4 个同学一起考上的概率是 4 个低概率的乘积，就更低得离谱了。以上的评判是把一个宿舍 4 位同学考研看作是 4 个独立事件而计算出来的概率。其实他们并不是完全相互独立的，他们之间有学习促进的关联性，良好的学习氛围让他们考研的概率大幅提高。因此不少学校都会出现这种现象，概率并不像计算的那么低。这种学习氛围的相关性也是孟母三迁的底层逻辑。

作者回复：有趣的答案。补充一点，女性和男性可能不一样。我在大学这么多年，学霸宿舍大都是女生宿舍，女生更容易相互促进。而很少会有男性学霸宿舍，很多男性学霸的宿舍里往往都有学渣。我的感受是男性往往想，不怕输（不了就算了，差距太大就躺倒了），而女性不一定追求赢，但是怕输。

#### 04

概率的计算，需要分析几个影响要素之间为独立性还是非独立性，方能做出理性的判断，对于独立事件而言，即使连续的发生，每次的概率并不会有变化。但生活中其实很多概率为非独立性，比如有时开车走一条路，会连续遇到好几个红灯，而有时又是畅通无阻，每一个信号灯、距离、时速，会有一定的关系。

作者回复：所以，这世上所有的概率都是条件概率。

#### 05

年轻人如果一开始走向社会就遇上一个骗子，损失惨重，就容易怀疑人生，不太愿意去相信陌生人；反过来说，好朋友不也是从陌生发展而来的么。所以，封闭自己从感性角度来说是合理的，从理性角度来看是以偏概全。那该怎么办呢？小时候好好学习，长大了认真工作，不断地跃迁进入更好的圈子，从「概率」上去来说，结果就能大体上让人接受。这也能解释，吴军老师说，他做人的原则就是「假定遇到的每一个人都是真诚善良的，默认选择相信，一旦这个人有骗行为，以后就不再联系」。

作者回复：接着吴军老师的话，有没有想过，为什么只要欺骗一次就不再联系了呢？好人善良的人偶尔也会欺骗别人一次啊。这就是贝叶斯公式中，一个你看了公式就能领悟到的性质。

#### 06

说到这个独立事件。其实在医学史上有一个非常著名的故事。新生儿猝死证，在理论上发生率是 2-3‰。有一个英国妇女连续有两个小孩都发生了新生儿猝死症，大家都觉得她太不幸了，结果第 3 个小孩又发生了新生儿猝死症，这时候大家把该事件看成独立事件，加起来存起来的话这个几率就太小了，所以很多医生甚至法官都判断这个女人很可能杀害了自己的小孩，但是实际上这并不是一个独立事件。既然她生的第 1 个小孩发生了新生儿猝死症，那么他后面的小孩发生新生儿的初始症的几率就大大增加了。最后还是一个优秀的统计学家和医学家一起说明了情况，解救了这个无辜又伤心的母亲。

作者回复：这是一个在概率统计上著名的悲剧。

## 0104. 概率计算：定义问题比计算更重要

上一讲，我们学习了概率论的第三块基石 —— 独立性。知道了事件的独立性是概率论中，定义随机事件相互关系的一个重要概念。只有弄清楚了随机事件的关系，我们才能正确计算它们的概率。这一讲，我们就重点说说概率论的最后一块基石 —— 概率计算，也就是如何计算概率。任何一个现实问题，我们都不仅要定性的了解，还要定量的描述。而概率计算，就是解决定量问题的。如果没有概率计算，我们对这件事的认识就只能停留在模模糊糊的直觉层面，很容易出错。

### 4.1 概率计算的三个法则

常见的概率计算题都是什么样的呢？稍有了解的人都知道，它们非常折磨人。比如，「从一副扑克中有放回的一张张抽取，求在第 6 张得到全部 4 种花色的概率」；还有类似什么「箱子里装有号码 1-N 的球，有放回的或者无放回的摸 n 次球，问正好是严格上升次序排列的概率是多少」……

我知道，听到这种题目，你立马准备关掉音频，只想静静。不过好消息是，我不打算讲这些。其实，概率计算没那么难。这一讲，我就抛开那些复杂的问题，跟你讲一讲概率计算的本质。再复杂的概率问题，也都是基于三个计算法则的。哪三个法则呢？1）我称之为「排列组合法则」；2）是「加法法则」；3）是「乘法法则」。相信我，只涉及加减乘除四则运算，你一定能听得懂。

#### 4.1.1 排列组合法则

排列组合法则适用于结果有限，而且每种结果都是等可能性的情况。计算方式很简单，就是这个随机事件出现的次数除以所有可能的结果的个数。比如掷骰子出现 2 的概率是多少，掷骰子可能的结果是 1 到 6，共 6 个可能，2 是其中 1 个结果，所以概率就是 1 除以 6，就是 1/6。是不是很简单？

不过要注意的是，我刚才说的是「随机事件出现的次数除以所有可能的结果的个数」，是「所有可能的结果」。为什么要强调这个呢？我给你举个例子。如果生男生女是等概率的，朋友家先后要了两个小孩，请问都是男孩的概率是多少呢？按刚才说的，列出所有结果，所有结果是几种呢？是「全是男孩、全是女孩、一男一女」这三种吗？不是的。正确的结果其实是四种 —— 男男、男女、女男、女女，所以两个都是男孩的概率不是 1/3，而是 1/4。

「先有个男孩再有个女孩」和「先有个女孩再有个男孩」，虽然都是一男一女，但它们不一样，它是两种结果。排列组合排列组合，就是「排列」和「组合」，排列是要分先后顺序的，所以这个法则也要分先后。其实，大部分这类的概率问题，考的都不是你的计算能力，而是排列组合的能力，看你能不能把所有的情况都排出来。

刚才说了，排列组合法则有个适用范围，就是针对等可能性的概率问题。如果不是等可能性的概率问题怎么办呢？比如糖尿病的发病率，或者高考上清华大学的概率，这些怎么计算呢？也简单，用这个随机事件出现的次数，除以样本的总量，就能计算出了。你看，其实和排列组合法则的逻辑一样，都是用随机事件出现的次数，除以所有可能的结果的个数。

#### 4.1.2 加法法则

如果说排列组合法则是针对单个随机事件的概率计算，加法法则针对的就是多个随机事件。以两个随机事件为例，一个随机事件发生或者另一个随机事件发生的概率，也就是这两个随机事件发生其一的概率，等于两个随机事件各自发生概率的和。三个随机事件，就是三个概率之和；四个随机事件，就是四个概率之和。这就是加法法则。

比如，开赛前专业分析师预测，费德勒获得冠军的概率是 20%，获得亚军的概率是 15%，那费德勒闯入决赛的概率，就是获得冠军的概率，加上获得亚军的概率，`20% + 15% = 35%`。不过，加法法则也有个限定条件，就是这两个随机事件不能同时发生，我们也称之为「互斥」。拿刚才的例子来说，费德勒夺冠和获得第二名不能同时发生，你不能说他既获得了冠军又获得了亚军。只有这样的随机事件，才能直接用加法法则。

举个反例。天气预报说，周六下雨的概率是 50%，周日下雨的概率是 60%，那周末两天有降雨的概率是多少呢？是周六下雨的概率直接加上周日下雨的概率吗？一加结果是 110%，超过 1 了。前面说了，概率一定在 0 和 1 之间，不可能大于 1，所以这么算肯定不对。到底哪里错了呢？可能你已经发现了，周六下雨和周日下雨并不互斥，周六下雨了，周日也可以下雨，它们可以同时发生。也就是说，还存在「周六和周日都下雨」的情况，所以不能直接用加法法则。那怎么办呢？用加法法则得出的结果减去周六周日都下雨的概率就好了。

#### 4.1.3 乘法法则

和加法法则一样，乘法法则也是针对多个随机事件的概率计算。以两个随机事件为例，加法法则是两个随机事件发生其一的概率，将两个随机事件各自发生的概率相加。而乘法法则是两个独立事件同时发生的概率，将两个随机事件各自发生的概率相乘就行了。比如，问「木村拓哉和金城武一起向你表白的概率是多少」，就用乘法法则，等于木村拓哉向你表白的概率乘以金城武向你表白的概率。不过，乘法法则也有个限定条件，得是独立事件。如果是独立事件，彼此互不影响，可以直接使用乘法法则。如果是非独立事件，那就不能直接乘了，而是要对乘法法则做个变形。具体怎么变，我们后面讲条件概率时会详细解释。

### 4.2 概率计算的真正困难是定义问题

概率计算是不是很简单？是不是只需要加减乘除四则运算就可以？正因为概率计算简单，所以概率论考试的时候，老师只能把题目描述得非常复杂。什么「或」「同时」「有放回」「无放回」，一字之差，结果就天壤之别。大部分人不会做概率题，不是他不会计算，而是他没看明白题目。也许打败他的不是数学，而是语文。真正搞懂题目的意思，才是概率论考试的重点。

概率老师这么做是为啥呢？是为了故意把学生卡住，不让他毕业吗？当然不是。这其实是一种思维方式的训练。让学生在复杂的题目中，寻找「或」，寻找「同时」，辨析互斥，辨析独立，计算和分辨各种复杂的排列组合，从而学会把考卷上的题目翻译成一个概率问题。

要知道，我们在实际生活中遇到的概率问题，可远比加减乘除困难，甚至比考卷上设定的题目更难。现实中我们不会计算概率，往往就是因为不会把一个现实问题，准确地翻译成「对」的概率问题。结果就好像我们有很多把钥匙，却总是拿它们开错的锁一样，当然打不开。

举个例子，看到飞机失事的新闻后，有些人常常开玩笑地说，「从概率的角度，下一班飞机更安全。因为如果飞机失事的概率是百万分之一，那么飞机连续两次失事的概率就是百万分之一乘以百万分之一，也就是万亿分之一。」你可能要笑了，这就是典型的「赌徒谬误」嘛。一般人认为，赌徒谬误产生的原因是人们没弄懂独立事件。但我要告诉你的是，即便弄懂了独立性，知道两个航班互相独立，很多人还是会算错，因为这些人对现实问题「翻译得不对」。他们混淆了「飞机失事两次的概率」和「飞机再次失事的概率」。注意，这两个看似差不多的表述差别是很大的。

「一个事件发生两次的概率」是什么？简单地说，是你准备扔两次硬币，注意，还没扔哦，问两次都是正面的概率是多少呢？用乘法法则，1/2 乘以 1/2，结果是 1/4。换到飞机失事的例子中，飞机连续失事的概率，注意，现在飞机还没有失事哦，就是飞机失事的概率相乘，确实可能是万亿分之一。

而「一件事再次发生的概率」呢？是已经扔一次硬币，正面朝上，问下一次还是正面的概率是多少？我们知道，抛硬币是独立事件，再次发生的概率不受前面结果的影响，结果自然还是 1/2。换到飞机失事的例子，一架飞机失事后，注意，这架飞机已经失事了哦，那再次失事的概率，就是普通飞机失事的概率，还是百万分之一 。

你看，对现实问题的翻译不同，概率计算的方式就不一样。我们说的是「再一次飞机失事的概率」，但你计算的是「连续两次飞机失事的概率」，当然不能反映现实问题，必然会出错。正确翻译现实问题，是概率计算最复杂的地方。概率思维的核心，就是准确地将现实问题转换成对的概率问题。这也是这门课要重点带给你的。

### 黑板墙

思考题：你有过因为没有准确地翻译现实问题，而导致失误的经历吗？

#### 01

下雨问题，我觉得我想明白了，老师问的是周末下雨的概率，周末下雨包含三种情况：1）周六下雨，周日不下雨 `50%*(1-60%)=20%`。2）周六不下雨，周日下雨 `(1-50%)*60%=30%`。3）周六周日都下雨 `50%*60%=30%`。以上三种情况是互斥的可以用加法法则：`20%+30%+30%=80%`。还有一种反证发，只要求出周未两天都不下雨的概率，用 1 去减就可以了两天都不下雨的概率 `(1-50%)*(1-60%)=20%`，`100%-20%=80%`。

#### 02

机场和航空公司对飞机每天都做大量检查说可以「降低飞机发生事故的概率」这种降低不是「数学层面」吧。社会上说的这种「提高或降低某某事件发生的概率」是否应该用「频率」这个词合理一些呢？

作者回复：这是条件概率，第四模块会详细讲。

#### 03

万老师在书里这么写过一段：假设现在是 NBA（美国职业篮球联赛）決赛，七局四胜。比赛双方ー强一弱，单场获胜概率分別是 55% 和 45%。那请问，这个强队最终得冠军的概率有多大？55% 对 45% 这个优势似乎已经挺大了，七局四胜的一个重要目的就是为了避免偶然性，让强队久经考验脱颖而出。但即便如此，这个强队最终夺冠的概率也只有 60%。老师能给推到一下计算过程吗？

作者回复：强队只有 55% 的获胜概率，7 场 4 胜居然拥有了 60% 的获胜概率，就知足吧 ee

计算过程：（就是乘法原则）1）4 场获胜概率：`0.55*0.55*0.55*0.55=0.0915`。2）5 场获胜概率：`(4)*0.45*0.55*0.55*0.55*0.55=0.1647`，第五场一定是强队获胜，前四场弱队一场。3）6 场获胜概率：`(5*4/2)*0.45*0.45*0.55*0.55*0.55*0.55=0.1853`。4）7 场一样：0.168。总共获胜的概率是：60.8%。

#### 04

概率论是上帝视角，独立完成一件事的不同种方法，加法原理；分步完成一件事的若干选择，乘法原理；还有排列，组合。我们都是从上帝视角来完成的：首先，所有可能的结果是什么，即求解样本空间；再挑选出满足要求的事件即可。一个抽签问题：若不放回的抽取红色小球，第几次抽取的概率都相同。这是因为，前面不管多少次抽，那也是不确定性事件。若之前抽中了，后面抽的概率降低；若之前抽空了，后面抽的概率升高。概率论讨论的是，事情发生之前的概率。

作者回复：频率法大体是是上帝视角，而贝叶斯解逆概率问题关注现实视角。

#### 05

说道「飞机失事的概率」，以前虽然也有人从概率的角度上解释过，说比火车安全呀，比汽车安全呀，但每次乘飞机，自己还是有那么一些些紧张，因为我深知笑来老师一句话：「万分之一的概率，不一定意味着要一万次才发生，完全有可能第一次就发生啊。」刘老师你怎么看？

直到后来我从一本讲「微死亡」等内容的书上了解到其实乘坐飞机比坐在家里都还更安全！其实就是坐在家里的「微死亡」指标居然都是大于乘坐飞机的！你看，我们人类的这个情绪脑呀，明明从概率的角度上已经知道乘飞机很安全，却还是需要做个类比（当然有客观数据支撑），在感性上影响自己的大脑，オ会最终使得自己心安呀。我想这也是为什么刘老师三番五次强调我们这门课不讲那些太过抽象的数学概念，知识，而是尽量多举生活中的例子，用接地气的语言娓娓道来的原因吧。

作者回复：飞机失事概率是百万分之ー，那么我想知道飞 100 万次，发生一次失事的概率是多少？一次都不发生的概率是多少，发生 2 次的概率是多少？等等。这就是整体概率大体知道的情况下，计算发生次数的概率，得用到这门课最难的一讲，泊松分布。但你可以有一个基本认知，1/100 万的概率，做 100 万次一次都不发生的概率是 37%，发生一次也是 37%，发生两次和两次以上 26%。

#### 06

听完一节我联想到了以前想过但没想明白的一道关于人口的概率问题。假定必须考虑到有些家庭一定至少男孩的需要，下面有三个方案，哪个方案会破坏人口总数上的男女孩平衡：1）生二胎。2）随便生，没有限制。3）如果女孩先出生，可以继续要，直到有了男孩就停止。

其实三种方案都不会破坏。因为无论哪种方案都不会打破男女比例均衡，因为样本总数没变，性别慨率也没有变，那么最终也影响不到男女比例均衡的大数法则。但是通过医学上的性别鉴定（以前是 B 超，现在有抽血测 NDA）来选择出生性别就会破坏了男女比例均衡，因为它增加了样本总数，从而破坏了男女比例均衡。所谓计划生育政策，初衷在于想控制人口增加速度或人口总数，本意也不想破坏男女均衡，但用简单粗暴的办法所造成的结果是。算了，在这里我不想评价这个政策的是与非，所谓「知我罪我，其性春秋」，秋万代都有人评，我亦非仗马。

我只是想如果能回到那个时间点，我想把刘嘉老师的概率论的课推荐给具体的政策制定者听一听。较优的策略起码应是立法杜绝医学性别鉴定，弹性调整各域人口出生总量。一昧地只盯着结果，用现在的话说，只关注结果导向，不考虑实施过程当中的具体措施所引发的蝴蝶效应而造成的灾难，可能会遗祸无穷。

## 0105. 概率度量：建立整体确定性的三种方式

前面四讲，我们学习了概率论这座大厦的四块基石，也明白了概率论解决问题的核心思路 —— 把局部的随机性转化为整体上的确定性。要实现这个转化，靠的是什么呢？当然就是「概率」。当一件事的概率确定了，它在整体上发生的可能性就确定了。这一讲，我们就来看看整体的确定性是如何建立的。换句话说，我们是如何度量概率的呢？

简单来说，常用的度量概率的方法有三种 —— 定义法、频率法、迭代法。为什么会有三种方法呢？一种方法难道不好吗？其实，这三种方法是伴随着概率论的发展逐步出现的。最开始是定义法，后来又出现了频率法和迭代法。除了定义法现在用得比较少了之外，频率法和迭代法到现在还在大量使用。学习了这一讲，你不仅能了解概率论的发展脉络，还会更深入地理解概率论「把局部的随机性，转化为整体上的确定性」这个解决问题的核心思路。下面我们一个一个说。

### 5.1 定义法

听名字就知道，定义法就是直接定义，直接认为某件事不同结果出现的可能性是相等的，没有任何一个结果比其他结果更有可能发生。比如定义法认为，抛硬币正面朝上和反面朝上的概率相等，都是 50%；一个标准的骰子，抛出每个点数的概率也相等，都是 1/6。这些概率，都是我们直接定义的。

现实生活中，我们也经常这样设定。比如，选择题 4 选 1，我们认为随便选一个，蒙对的概率是 1/4。这里就有一个人为的设定，就是认为「每个选项正确的概率都是一样的」。再比如，我要去跑马拉松，要么坚持下来到达终点，要么中途放弃。跑之前，我说跑完或者放弃的可能性「一半对一半」，这也是一种等可能性的设定。

你可能会说，怎么能随便定义呢？这不靠谱吧？确实，从现在的视角来看，定义法是有很多不靠谱的地方。这是概率论这个学科刚刚起步的时候，我们对概率的认知局限所导致的。你可能听过「古典概率」这个说法，古典概率就是这样一种等可能性的概率定义法。

不过我想说的是，虽然定义法简单粗暴，但是在宏观尺度上，它是一种对现实世界的合理简化，还是有一定科学性的。你看，我们用定义法确定抛硬币、掷骰子的概率，几百年了，还是挺准的。全是蒙对的吗？当然不是。定义法这种等概率假设，是基于宏观世界的对称性这个大前提的。

对称性，是世界的普遍规律。雪花是对称的，花瓣是对称的，单摆小球的轨迹是对称的，连行星运行的轨迹很多也是对称的，甚至在微观粒子运动和相互作用中，也会体现对称性。对称，是自然最完美的展现。一枚理想的硬币，在几何形状上是对称的，密度是均匀的。当硬币抛起来的时候，作用于硬币上的力也是对称的，重力、摩擦力、大气压力等都是对称的…… 所以我们当然就假设，硬币正反面出现的概率也是对称的，一半一半，各 50%。你看，用定义法进行等概率假设，是不是有一定的科学性？

那我为什么又说这是合理的简化呢？刚才说了，影响硬币在空中的状态的因素太多了。硬币的密度、形状、出手的角度、空气的密度、当时的风向等，都有影响，完全搞清楚是非常困难的。但是一方面，可能这些因素的影响很小；另一方面，各个因素的影响又会互相抵消。所以我们就全部忽略这些，把它简化成没有其他因素影响的理想状态。这不就是一个合理的简化吗？

连著名的经济学家凯恩斯在他的《概率论》一书中，都专门给这种定义法取了个名字，叫「无差别原理」。也就是说，如果没有充分理由说明某件事的概率，就给予每个结果相同的概率。这个原理在科学、统计学、经济学、哲学、心理学中的应用，持续了很长时间。

### 5.2 频率法

虽然定义法好用，但随着概率论要处理的事情越来越多，慢慢的我们就发现，在很多事情上，多个结果出现的概率是不相等的。比如，一个人患肺癌的概率、一批产品的次品率、我们考试通过的概率…… 即便不知道到底是多少，我们也知道，假设概率「一半对一半」是很荒谬的。怎么办呢？

随着数学家对概率研究的深入，我们就有了第二种度量概率的方法 —— 频率法。频率法就是说，只要数据量足够大，一个随机事件发生的频率就会无限接近它发生的概率。换句话说，虽然每次结果都是随机的，但随着这件事重复的做，只要重复足够多次，隐含的规律就会慢慢浮现出来。

拿掷骰子来说吧，现实中我们当然没法找到一个数学意义上六个面完全均匀的骰子，所以严格的说，它各个点数出现的概率肯定就不相等。这时候，定义法就失效了。怎么办？用频率法。我们可以反复掷骰子，比如掷 1000 次，点数 6 出现的次数达到了 500 次，也就是说，点数 6 出现的概率大约是 1/2。这和定义法的 1/6 差得实在太远，所以我们就能做出推测 —— 这个骰子很可能被做过手脚。

现实的概率度量也是类似。比如投篮命中的概率、肺癌患病的概率等，只要找到足够多的数据，我们用投篮命中的数量除以总投篮的次数，用患肺癌的人数除以样本的总人数，计算出来的频率，我们就认为它大概就是这件事发生的概率。这种依靠大量数据获得真相的思路，是现代统计学的基础，广泛地应用在各个学科之中。这个我们会在第二模块、第三模块详细讲到。

### 5.3 迭代法

有频率法就行了吗？不行。当我们用概率解决生活问题的时候，发现还是有些事情解决不了。

首先，有些事是没法试的。比如，美国说要在 2050 年登上火星，你觉得概率有多大？这可没法反复做试验。再比如，你向某个女生表白，成功的概率有多大？也不能表白个 500 次，计算一下成功的次数吧？

其次，很多事不断发展，它的概率是不断变化的。比如费德勒和纳达尔的比赛，费德勒获胜的概率有多大呢？随着比赛的进行，场上局势的变化，这个概率也是不断变化的。

而且，很多问题还和个体的差异有关。比如同样一道 4 选 1 的选择题，不同人答对的概率是一样的吗？当然不是。有些人只能靠蒙，可能他答对的概率就是 1/4；而他隔壁桌的那个学霸，答对的概率可能是 99%，甚至是 100%。

类似的问题还有很多。或者是数据量不足，或者是概率本身不断变化，或者是和个体密切相关，这些事情的概率都没有办法通过反复试验、收集数据来预测。怎么办？想办法解决问题嘛。于是，数学家很快就有了第三种概率度量的方式 —— 迭代法。迭代法就是说，先利用手头少量的数据做推测，甚至是主观猜测一件事儿的概率，然后再通过收集来的新数据，不断调整对这件事概率的估算。最常用的方法就叫作「贝叶斯」。

有了迭代法，刚才说的没法解决的问题，概率就都可以度量了。比如，虽然没法通过反复试验判断美国 2050 年登上火星的概率，但是我可以先给一个假设，比如就是定义法中的 1/2 吧。然后，我不断收集新的数据和证据，比如美国登陆火星的计划的公开、核心技术的发展状况、美国太空总署的经费变化、火星登陆的新闻报道等，来调整之前的预测。这种不断迭代和调整的方法，就是我们说的迭代法。具体的内容，我们会在课程的第四模块详细讲到。

### 5.4 不同概率度量方式的关系

讲完了概率度量的三种方法，你会发现，它们其实是从不同的视角来度量概率的：1）定义法，是通过自然世界的对称性来定义概率；2）频率法，是用随机事件发生的频率来计算概率；3）而迭代法，是用一种动态发展的、考虑个人差异的角度来度量概率。

通过对这三种方法的学习，你应该也能看出来，跟所有的科学研究一样，人们对概率的研究也是不断深入的。不过要提醒你的一点是，这三种方法并不是泾渭分明的，它们经常融合着使用。频率法可以验证定义法的正确性；迭代法也可以用定义法或者频率法来获得最初的判断；频率法和迭代法，又可以同时使用，相互验证。打个比方来说，这三种方法，就好比工具箱里的三把尺子，共同对概率进行度量。这也是概率论和很多学科不一样的地方。它不是新方法推翻旧方法，而是一种方法为另一种方法提供其他维度的辅助。

### 黑板墙

思考题：你还能举出身边的例子来告诉我，哪些情况下是用定义法定义概率，哪些情况下我们常常使用频率法和迭代法吗？

下节预告：从下一讲开始，我们进入课程的第二模块。我会带你详细了解刚才说到的概率论的半壁江山 —— 频率法。

#### 01

贝叶斯定理在具体应用时会面对一个现实的问题 一一 不同的证据效力不同。对于一个和事件有弱相关性的证据，在调参时就不应该等同于和事件有强相关性证据的效力。因此，需要引入加权的概念，给不同的证据赋予不同的权重。

作者回复：贝叶斯公式真正最困难的是那个对先验概率的调整，定量的调整。这个不能猜，必须要拿出实际的数据，才能让贝叶斯公式真的发挥作用。比如大家都举的例子，检查出疾病的例子，你得确切的知道全人群得病率，也得知道仪器的假阴性和阳性。贝叶斯的强大是基于证据对概率调整的准确权重 / 幅度的。而这恰恰需要数据，需要频率法的支持。所以，你能理解，为啥贝叶斯在人工智能啊基因工程啊电子商务啊啥的这些地方用的好了吗？因为那些地方有大量准确的数据，算得准啊。

1-2『这里又想到了王烁强力推荐的书籍《超预测》，一定要去研读一下。已下载书籍「2019257超预测」。（2021-02-12）』——未完成

#### 02

我们前面已经讨论过，我们之所以说现在已经进入了 VUCA 时代，就是因为因为科技发展，社会变化，文化交流融合等因素，支撑我们这个社会进步的「基石」越来越多样，影响这个时代事件发生的因素越来越复杂，我们不得不用充分理解概率论的方式，才能更加准确的把握到所谓趋势。而在本次课程中，我们又学到了度量概率的方法，实际上，我们应该把定义法、频率法、迭代法这三种度量概率的方法，看成是能帮助我们去做出正确決策的工具。

那么，我们会发现一件事，为什么我们说数据越来越值钱，甚至有数据黄金甚至数据石油这样的说法？其根本原因就在于，从定义法，到频率法，再到迭代法，我们做出正确判断所需要的数据量其实是不一样的，甚至可以说，完全不在一个量级。1）定义法需要的数据量最小，甚至接近拍脑袋；2）频率法需要我们做一定量的实验，得出一定量的数据，才能推断出一个概率值。3）而迭代法，需要不断有新的数据来补充和纠正我们的判断，实际上所需要的数据量可以说是无穷的。没有数据，你所以为的「正确」就有可能啥也不是，这就是为什么数据越来越值钱的原因。

作者回复：这点儿非常重要，你看现在人工智能用的好的行业都是数据多的行业，数据越多越准确，贝叶斯计算就越准确，就可能越能带来帮助，会收获更多的收益。

#### 03

如果真的有一枚理想的硬币，什么因素都了解的情况下，为啥还能假设它是 50/50 的概率，应该每次抛出的面都是一样的。

作者回复：如果用一个机器调好所有角度，撇去所有影响，确实是个确定事件，概率百分百。但现实抛硬币做不到，出手的一点影响都会改变正反，依旧是效果随机。当然现实问题是，每一枚硬币都有些许差异，每一次抛都会有些许磨损，概率也许都不稳定，只是大体上是一半对一半的正反面。「公平」的硬币是一个数学模型。