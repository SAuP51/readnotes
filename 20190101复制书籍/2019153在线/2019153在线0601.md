# 0601. 追寻在线凌云梦

让计算成为人类的能力，让数据变成世界的财富。今天更多人成了计算和数据的探索者和追梦者，阿里云也是其中之一。

在线世界有了新的价值体系，也发生了许多预想不到的事。大和小的差别没有了，制造企业和互联网企业之间的差别没有了，传统互联网和移动互联网企业的差别没了，许多事物之间的界限都在变得越来越模糊，甚至消失。

说到云计算，大家或者觉得云里雾里，或者认为那是一件离日常生活很远的事，然而云计算就在普通人的身边。2013 年年初，我收到了一封信，来自安康铁路工务段的一位铁路工人，名叫吴磊，信中列举了阿里云服务中存在的很多问题。这是我人生第一次知道陕西有安康这个地方。2013 年 10 月，作为感谢，我专门邀请吴磊来杭州参加阿里云开发者大会。

吴磊的妈妈平时喜欢看法制节目，比较担心阿里云是一家传销公司，怕儿子被骗，百般阻挠不让他来。吴磊虽然背着家里出来了，也担心陷入传销骗局，几次拒绝了热心的阿里云员工接站的建议，选择搭乘出租车前往大会现场 —— 因为方便逃跑。

我特别好奇一个铁路工人怎么会想到用云计算，又如何用云计算？见到吴磊后，我激动地说有机会一定要去安康看看。尽管吴磊反复催我，但工作实在太忙了，所以一直没能成行，直到最后他告诉我说：「王博士，你要再不来安康，我的麻烦就大了。」到了安康我才知道，吴磊的家人、同事和领导都不信一个研究云计算的人会跑到大山里，根本没人相信他的话。如果我不去安康，他和我的合影也可能成了他骗人的证据。

这样的故事听上去让人哭笑不得，但到了安康，我却不得不对吴磊肃然起敬。吴磊所在的铁路机务段，位于秦岭大巴山深处，负责上千公里的铁道养护工作，养路工人一年到头都在外面作业，以保证铁路安全。高中没有毕业的吴磊利用云计算，把紧急文件和通知及时传达到工作在千里铁路上的工人们手中，包括车次改变和安全通知等重要事项，以确保行车安全。一旦某个地段出现塌方等险情时，铁路工人们就能够通过手机拍照快速将信息回传至阿里云服务器，让不同路段的负责人都能第一时间查看。原本无法逾越的空间和时间障碍，就这样被云计算轻松地化解。

吴磊在秦岭大山下 30 多公里长的隧道里展示他的工作的那一刻，我真正感受到了什么是云计算，云计算和铁路安全是在安康的崇山峻岭里被联结在一起的。更让我印象深刻的是，在巴山小站，我看到一个小男孩和小女孩共同拿着一部手机，在小站的一角里蹭网，这是附近唯一能连上 Wi-Fi 的地方。那一幕对我内心的震撼，无法用言语形容，这就是互联网版的凿壁借光，这一缕光对这些还没走出大山的孩子而言，是了解世界的窗户，也把他们的梦想和世界连在了一起。

我想，云计算就是要服务好更多这样的普通人，成就每一个人的中国梦。我也非常感谢阿里云的用户，特别是很多没有见过面的用户，是这些人在云和互联网上的创造力不断触动我，也让我思考，不断发现和理解发生在身边的许多事。没有阿里云，我也就没有和这些人相识的机会。互联网的出现改变了吴磊，也改变了我，让更多人成了追梦者，阿里云也是追梦者之一。

## 6.1 拨开计算迷雾

2011 年下半年，当时还在 CSDN 工作的刘江，多次采访阿里云，写下了他自己对于阿里云的印象 —— 阿里云一直在追随计算在线之梦。相比阿里巴巴旗下人人皆知的淘宝、支付宝等子公司，组建于 2009 年 9 月 10 日的阿里云要低调得多。也许因为恰逢阿里巴巴集团成立 10 周年，庆典的宣传太过火爆，外界很多人当时要么压根儿没留意到这个新公司的诞生，要么就将它与阿里软件混为一谈了。

此后，除了 2009 年年底大批招聘技术人员见诸报道之外，阿里云似乎一度从人们的视野中消失。即使是在云计算已经成为业界焦点、如火如荼的 2010 年，也未见阿里云有较大动作。原定于 2010 年年底的发布迟至 2011 年上半年将尽仍然不见动静。而在此前后，阿里云庞大的布局曝光 —— 分布式计算系统、分布式数据库、手机操作系统、浏览器、输入法、搜索、地图、邮件、翻译…… 引起技术圈内的激烈争论，豪华团队、投资巨大、研发受阻、前途未卜等有关阿里云的传言也越来越多。更有前阿里员工甚至直斥阿里云「不靠谱、纯忽悠」。

2011 年 7 月，联手天语推出的阿里云手机迅速成为媒体焦点，总体上外界的评价是毁誉参半。在 10 月 24 日召开的开发者大会上，弹性计算平台、开放数据处理服务、App 开发平台、云应用平台、开放存储服务和 CDN、开放结构化数据服务等全线产品首次全面发布。但围绕着阿里云的疑问仍然不绝于耳。一个电子商务公司为什么要同时做云计算和移动操作系统？为什么一开始就做这么全面的布局？在中国，这个市场里如何靠云计算赢利？三年时间里阿里云荟萃的众多技术精英到底做了些什么？带着这些问题，12 月 28 日，我专门飞到杭州，对话阿里云掌门人王坚。

被同事习惯地称为「博士」的王坚是一位颇具传奇色彩的技术领袖。这位 1962 年出生的杭州本地人个子很高，学者气十足，说话思维敏捷，声音洪亮。小时候成绩并不出众的他，长大后却成为博学广识而有独特思维模式的怪才。

### 6.1.1 平台之梦

位于杭州文二路西湖国际科技大厦的阿里云公司办公场所面积很大，充满活力，满眼都是朝气蓬勃的技术人员。据介绍，目前公司已经有 1 200 人，其中八九成都是工程师，包括中国第一个国际大学生程序设计竞赛冠军队成员林晨曦在内的一批技术骨干，分别负责基础平台、基础服务、云计算业务、云手机这 4 块，公司没有销售。

世界范围内，云计算的领导性厂商，技术上是谷歌，而业务上则是亚马逊。亚马逊网络服务目前已经渐渐成为主流，不仅是众多创业公司的首选，也是网飞、DropBox（免费网络文件同步服务供应商）、Zynga（社交游戏公司）等行业新贵们崛起的幕后英雄，已经实现数亿美元的营业收入而且潜力巨大。而在中国，对应的市场基本上仍是一片空白。在平台征战的时代，这块业务是众人瞩目的制高点，其重要性不言而喻。

阿里巴巴是中国与亚马逊最接近甚至在电子商务方面布局更全面的公司，它的资源实力毋庸置疑，而外界不大了解的是，其技术能力在业界也是领先的。因此，阿里投身做云计算，逐鹿平台之战，并不奇怪，但阿里的雄心仍然令我吃惊。王坚介绍，从战略上来说，他们想做的事情实际上可以解读为「亚马逊 + 谷歌」并有所超越。亚马逊最重要的贡献是真正实现了计算的效用化，而谷歌真正从技术上把计算的规模做上去了。这两点阿里云都要做，即用谷歌模式的技术来做亚马逊模式的运营，而且同时还在慢慢努力做一件事情 —— 数据，要为人人提供全网规模的数据与计算。也就是说，如果你今天愿意，就可以做一个全网规模上的搜索引擎，计算和数据不再是你的约束。

阿里云对自己使命的表述方式颇有点与众不同 —— 打造以数据为中心的先进云计算服务平台。在对话中王坚不无自豪地表示，三年前成立公司的这个初衷，现在一个字都不用改。他们当初对云计算的理解和判断基本上仍然是成立的。

1-2『打造以数据为中心的先进云计算服务平台。目前个人的使命是「打造一款工程设计领域中以数据为中心的云计算服务平台」。做一张金句卡片。（2020-11-17）』——已完成

为什么这么强调数据？王坚认为，数据将成为对国家和企业来说至关重要的战略性资源。而且，近年来发生了一个革命性变化 —— 数据都是在线搜集完成的，从不在线到在线，数据真正具有了战略价值。与他的说法可以相互印证的是，在全球范围内「大数据」也成为业界热词，有国外观察者称数据将成为新时代的石油。

另一个要素 —— 计算能力，也是国家和企业的绝对核心竞争力。谷歌是一个很好的例子，它实际上是把本来是大家公共的数据变成独有，然后在此基础上创造了一个巨大的企业。相当于位于 6 000 米海底下的石油，理论上是大家的，但别人都没有能力开采，只有谷歌有这项技术能挖掘其中的价值。而阿里云的愿景是做中国拥有最大计算能力（而不是服务器最多）的公司。

阿里云的业务模式有两种：一种是数据中心、技术和运营都由阿里云负责；一种是数据中心和服务器是客户的，阿里云负责技术和运营，与客户分享收入。后一种模式已经有好几家公司在尝试，王坚预计后一种可能利润更高。

### 6.1.2 超越 Hadoop

王坚在对话中多次强调，阿里云战略中最与众不同之处，就是坚持追求拥有自己的具有竞争力的核心技术。而且，经过三年艰难的技术攻关，数次推倒重来，终于跨过了这个技术门槛，依靠自己的技术力量做成了「飞天」这个非常扎实的通用大规模分布式计算系统，它除了 MapReduce 之外，还支持最广泛的各种编程模型。而且，阿里云技术人员在这个统一平台上实现了电子邮件、搜索、地图、弹性计算、数据处理等众多功能，也就是说邮件和搜索底层是一样的，除他们外，在世界上只有谷歌能够做到这一点。

说到这里，王坚有些动情：「这其中有很多具体的技术难题，有的非常难，比如调度那一块，就让开发团队吃了不少苦头。你不做到那个层次，根本不会知道其中的奥秘。一开始很多人都不相信我们能够做出来。但我们成功做出来了，对此我完全有理由感到自豪。」

我们都知道中国公司很少会选择冒很大风险自己从事这种底层的自主研发，当时这一决策是怎么做出的呢？难道不怕最后搞砸了无法交代？

王坚回答说，做平台必须面对正面战场，这是绕不过去的，打游击战、平型关大捷什么的没有用，无法结束战争。幸运的是，团队的内外部环境非常好：集团对此有足够的耐心和支持，马云本人是铁杆的支持者，集团财务官也说过钱不是问题，加上有一批铁杆的员工，还有铁杆用户的支持。他直言：「有这么幸福的环境，如果还做不成的话，只能说是我们这帮人无能。」处于核心的「飞天」系统的研发成功之后，阿里云终于一扫之前的阴霾，各种上层产品源源不断地发布出来。

我又提出一个早已准备好的问题：为什么不直接用 Hadoop 呢？王坚说：「大家都会觉得，直接用 Hadoop 不是更好更快吗？Hadoop 当然在离线大数据处理上很有价值，但它无法解决我们公司公共云计算服务的问题，因为我们目前上线的云服务，已远远超出 Hadoop 的能力，这和公司的定位是有关系的。今天飞天已很好地支持了阿里云的各类业务，其中也包括了大数据处理。从这个意义上讲，飞天实际上已经超越了 Hadoop。」

他还补充说，现在号称做云计算的公司很多，实际上其中的技术门槛是非常高的，很少有公司具备这样的实力。一些企业搞 100 台服务器就声称要做网盘、云存储，还有所谓的私有云，把一个企业解决方案放大就说是云计算，说实话，这些真不能算。此外，通用的云系统比垂直、专用的要难得多，虽然在单看某个具体的应用效率上后者可能还是会有优势，但整个平台规模效益一上来，结果就完全不同了。

有了坚实的底层技术做支撑，阿里云就有信心在规模效益和成本上取得竞争优势。王坚举了一个最让他感到自豪的实验案例，在一个 1 500 台机器组成的数据处理集群上，一边处理数据的同时，还可以溜进去几个作业，完成动画渲染，实际上相当于渲染是免费的。

### 6.1.3 拨开迷雾

问：阿里云本来应该是专注于平台的，为什么会想到去做云手机？之后的路线图是怎么样的？

王坚坦言，这一年的确同时在打两个正面战场，很辛苦，但移动终端也是一个绕不过去的正面战场，靠做应用无法解决所有问题。这个决策主要是从阿里巴巴集团战略的角度出发的，不能失去这么大的一个机遇。内部各公司中阿里云最有条件做这一块。而且，战略上，移动互联网和云计算是不可分的，如果你的云计算只是在传统互联网上成功的话，其实还不能算成功。云计算生根不是在移动互联网上，但开花结果会在移动互联网上。

下一步基本上每两三个月会有一个新的版本，2012 年 1 月推出了手机 YunOS 2012 版，这一版在用户体验上有了很大的提高。同时，已经开始在谈第二个手机厂商，天语也会推出更多的型号，支持高端和低端，还有平板。但最重要的，是把互联网运营的思想带到手机上去。现在路子已经趟出来了，就是三个系统：终端操作系统、云端系统，还有运营手机的系统，比如应用商店之类。

问：你预计阿里云过几年能够像亚马逊那样成为盈利部门？

王坚确认，从集团角度阿里云会持续投入，一年 10 亿元，基本要做 10 年。但阿里云有可能在 12 个月到 24 个月以内实现盈利。现在公司可以不再增加一个人，收入却不断稳定增加。「我的第一个目标，是阿里云给集团外部提供服务所需的计算资源，要超过集团内部，这个目标的实现是可以预见的。而第二个目标，是我们的计算规模能够与亚马逊相提并论，相信一定不会花 10 年的时间。」

阿里云的战略方向是正确的，自主研发核心系统的勇气也令人敬佩。从 CSDN 最近与阿里云平台的合作来看，产品值得信赖。阿里云公司杭州办公区的前台有一副对联，相信给所有访客都留下了深刻印象：梦想永在凌云意意气风发，代码成就万事基积沙镇海。让我们祝福阿里云。

我自己也被在线改变了，不然我可能还在学校做教授。几年之后，我终于找到一个机会和刘江说：「当别人还不相信阿里云时，是你坚定地相信了阿里云。」梦想能否实现不重要，心里永远有梦想才能每天幸福。然而很多时候，实现梦想是「悲剧生活」的开始，因为你需要付出成倍的辛劳。但互联网的火种已留在了心中，心中只要留着火种，就有点亮的一天。

历史上有价值的变革，都源于对用户需求的准确把握，以及对用户心声的近距离聆听。而失败的变革，也往往是因为远离了用户。在线的价值，是在用户和决策者、服务者、提供者之间建立天然的沟通渠道。用户用鼠标和脚投票，成本低廉而效率极高的特点使得在线的价值必须牢牢依托于用户本身。

云计算本来是没用的，只有碰到用户，才能体现出它的价值。下面是一些用户的故事，在这里讲述，不代表他们成功，重要的是他们的开拓和进取精神，他们是云计算的天使。

## 6.2 传统和创新同行，大和小同台

2013 年 9 月 26 日，天弘基金「上云」成功。天弘基金不仅成为金融行业第一家完成核心结算系统基于云计算「去 IOE」的公司，更将清算时间由原来的 8 小时缩短到现在的半小时，交易并发峰值从每秒 500 笔扩容到每秒 5 000 笔，当日交易数从每日最高 1 000 万笔扩容到 3 亿笔，支持的有效用户数扩大到 1 亿。之前，天弘基金只是国内一家不知名的货币基金公司，然而根据互联网女皇玛丽·米克尔（Mary Meeker）2014 年的报告，它已成为全球三大货币基金公司之一。

1『有幸看过女皇 2019 年的报告，渠道是从冯大辉的知识星球里。（2020-11-17）』

近几年，各路精英吹响了对互联网金融行业进军的号角，一时之间，互联网金融热潮涌动，无数专家对其进行了多视点多维度的深入剖析，但汹涌的背后是鲜为人知的技术实战。从传统封闭的 IOE 格局迁移到更加动态扩展、成本更经济的云平台上，要跨越的障碍实在不少。即使在云计算的发源地 —— 美国，囿于安全性、合规性和风险等方面的挑战，金融业虽然与 AWS 接触频频，但还没有走出实质性的那一步。到了国内，习惯有标杆可以模仿的我们，是继续等待，还是走出一条新路？

2013 年，余额宝发布之后不到两个月，就为天弘基金带来百亿元级别的资金增量以及百万级活跃用户，平均每月规模增长 100 亿元左右，累计用户数已超 250 万，天弘增利宝已经成为国内用户数最多的货币基金。如此增长之后，「保证安全 + 降低成本 + 为未来业务提供弹性扩展」的架构已经成为必需。

「传统的理财产品，总是瞄准创造价值最高的 20% 的人群，而互联网的长尾效应，则让余额宝有可能覆盖剩余的 80% 的人群，这类人群在传统的金融体系中不是主流人群，也很难获得很好的服务，甚至是没有理财观念的‘小白’客户。互联网金融大大降低了门槛，充分体现了互联网的速度，互联网让天弘基金创造了‘蚂蚁搬家’的规模效应 ——3 000 万客户人均 3 000 多元钱的投入，创造了 1 000 亿元的国内基金史上最庞大基金。」

余额宝推出之初的三个月，后台系统部署在天弘基金原有的数据中心。2014 年 7 月，天弘基金开始筹备参加「双 11」大促，从可预期的交易规模来看，几乎可以确定现有的技术后台，无法支撑「双 11」的交易量。天弘基金做了一个大胆的决策，抛弃传统的「服务器 + 数据库 + 存储」的架构，将全部后台系统迁移到阿里云上。

CSDN 曾针对余额宝的云实践采访了天弘基金创新支持部总经理樊振华等人。一期「IOE」，二期要「入云」，原因何在？外界看待余额宝是个整体，但没想到在技术实践上，余额宝是有一期和二期工程的。「最初余额宝与互联网的尝试，在整个基金行业也是第一次。完全是摸着石头过河。为了稳妥，我们在一期的时候采用传统的 IOE 架构，总投资 400 多万元。但是没有想到数据量和交易量的增长幅度如此大，远超平台承受能力，以至到了余额宝二期时，如果还采用 IOE 的模式，初步估算至少需要再投入 5 000 万元。再加上后期人力和周期服务，要三个月完成目标，这将是不可承受之重。」

如果说 6 月 13 日是一期的截止时间点的话，那么「二期，是从 7 月初开始开发的」。没有先例，是否就需要继续等待下去？没有先例，是否要继续投入上千万元去扩容和升级？没有先例，是不是可以等等看，期待国外会有案例给以启迪和复制？可市场会给予大家等待的时间吗？「余额宝迁移到云平台上，已经成为我们自发的需求。当然，也别无其他选择。」樊振华说。

尽管国际上金融行业也还没有采用公有云平台的先例，这不仅是单纯的技术障碍，还是意识、理解、勇气和监管要求等复杂交织的结果，但市场逼着我们向前，所以决策并没有大家想象的那么复杂。

事实证明，「没有选择的选择，到后来却发现是最好的选择。」樊振华笑着对 CSDN 云计算的记者说。要将曾经根植在 IOE 上的软件迁移到阿里云上，开发、调整、优化必不可少。但时间如此紧张（最多就三个月），那么，一开始，打造合作多方的信任关系自然至关重要。

「余额宝本身拥有极强的互联网属性，数据量大、业务量大、响应速度要求高。时间这么紧，天弘、金证和阿里云、支付宝，简单沟通后立即投入了启动工作。也因为时间太紧，所以我们也没有调研的时间，更没有可调研的成功案例。可以说，基于多方的信任，资源共享和无所畏惧，是我们走到一起的根本原因。」樊振华如此表示。

去 IOE，硬件相对容易些，最难的是与应用密切相关的数据库，是去 Oracle 数据库。迁移到云上之后，「在预测环节，实时并发数要求为 3 000TPS（每秒可以开 3 000 户），但测试结果是可以达到 5 000TPS，极限容量可以到 12 000TPS。」「如果经过系统调优，以过去的工作经验来看，在现有的设备和硬件网络环境下，性能翻一番应该是正常的。」

除此之外，樊振华对安全也很满意：「在测试中，阿里云提供的数据库服务主备切换，速度非常快。再加上我们化整为零的策略，全部热插拔硬盘，使得数据的安全性得到了很大的保障。一直到现在，都没有出现过任何问题。坦白说，在基础平台安全方面，阿里云已经比较成熟了，尤其是在应对高流量、大数据量冲击的时候，要比很多中小基金自己的系统稳定和安全很多。」

据悉，每进行一次系统迁移的演练需要 36 个小时，反复演练多次，确保万无一失，才在 9 月正式做了切换。从 IOE 向云上迁移，余额宝的项目团队做出了非凡的努力。「真正去了 IOE，发现没有想象中复杂。」这几乎是每位组员的感受。一直很低调的余额宝，在技术上更加低调，老老实实做事。据悉，二期时，整个团队都是封闭的，「我们做什么外面基本都不知道」。

媒体和基金公司看似没有直接关系，但在我的生活中却因为云计算二者被联系在了一起。

2013 年 3 月开始，自媒体成为搅动中国媒体圈最大的一股力量。由于国民应用微信开放了公众账号，人们可以注册属于自己的公众号，发表自己的观点。只要内容够精彩，从 0 个订阅者到 5 万订阅者，不过只要几天时间。2013 年年初，潘越飞把我在 MTC 活动上的一次发言，写成了《王坚：云计算和大数据你们都理解错了》一文，后来发现此文流传甚广，大大超出我的想象，也算是我对这个群体的一次个人体验，不过最让我记忆犹新的却是青龙老贼的遭遇。潘越飞后来写道：「当天，青龙老贼转发了王坚的部分观点，结果遭遇了他开通微信公众号以来最强烈的退粉，也激起了圈内人的各种讨论。」潘越飞一文的流行和青龙老贼的退粉让我认识到在在线世界中，「大」与「小」的定义与传统世界不一样。

很抱歉给青龙老贼带来了麻烦，不过比起虎嗅网，他的退粉相对还要好一些。虎嗅网是一家成立于 2012 年 5 月的新兴科技媒体，这只「老虎」向来以观点犀利著称，屡屡挑战原有的商业认知。以下对其发动的网络攻击不知道是否与这些有关。

2013 年 2 月底发生的一场网络对抗，是虎嗅面临攻击的一个典型事件。根据虎嗅网刊发的文章《【实录】2 月 27、28 日，虎嗅经历了这么一场服务器反击战》：2 月 27 日 18 时整，虎嗅收到 4 个监控平台的各种监控报警，提示异常：1）tcp 链接数升速异常。2）cpu 使用率飙升。3）http 响应时间过长。4）带宽利用率异常。5）数据库压力升高。

虎嗅随即对服务器做了相应调整，但攻击流量过大，已经超过了我们的总带宽。实际上，虎嗅前段时间已经遭遇了很多莫名的扫描和密码破解。看上去，伏击者准备已久了。

18:05，根据阿里云的流量清洗规则，「云盾」被触发，阿里云对攻击虎嗅的流量进行清洗，我们接到各种恢复提示，看起来一切正常了，虎嗅的流量只剩下被攻击时的 1%—3%，攻击者的流量基本稳定在虎嗅带宽 10 倍多点的流量上。

19:50，攻击者开始加压。攻击流量飙升到阿里云「云盾」清洗上限（云盾免费清洗上限），服务器瞬间倒地。

在阿里云同学的帮助下，21 点左右，虎嗅开始恢复正常。而同时，攻击者再次加压。虎嗅网跟阿里云「云盾」接受了第二次考验，最高流量一度达到虎嗅网总带宽的接近 40 倍，但在阿里云的服务支持下，始终未对虎嗅网造成致命打击。随后攻击者改变了攻击方式，虎嗅再次倒地。这时，远在杭州的阿里云团队协助虎嗅网使用了阿里的负载均衡（SLB）。虎嗅网再次站了起来。攻击失效后，流量渐渐退去。

第二天白天，虎嗅再次遭受各种形式的打击，但每次一遭受短暂的影响，我们的云服务商阿里云就及时提供帮助。外部攻击始终没有对虎嗅造成太大的影响。借着这次虎嗅保卫战，我们感受到的是，云时代的攻击和防护方式与传统服务器托管时代有着鲜明的对比。

几年前网站遇到外部攻击，如果是小量攻击，就提高自己的抗攻击能力，从性能和过滤方面着手；如果量级比较大，只能联系机房加大带宽、联系防火墙厂商提供更强大的过滤设备、增加物理服务器数量；攻击再猛烈一些，只能举白旗投降。

传统服务器托管时代，因为办公场所与托管机房之间有物理距离，所以整个过程折腾下来，至少需要 6 小时。而在云时代，反击时间已经大大缩短：小攻击自动被过滤；云服务商们的弹性计算也可以提供无缝的性能来提升临时抵御攻击，响应速度、资源匹配上都更快更灵活，这使得网络攻击在未来可能再形不成恶意力量。

如果我们把云的这种防护技术看作互联网基础设施的基本特性之一，那么技术赋权的确正在改变着一切。在新疆有一个维吾尔族的音乐网站，该网站专门搜集分享新疆的民族和原创音乐。创始人艾尔肯，既是一名音乐爱好者也是一名业余程序员。他在北京念了大学，毕业后返回新疆。

他回去了以后发现新疆的音乐失传现象很严重，很多民族音乐都不在了，而且没有一个地方能把这些音乐留存下来。之后他自己建了一个小的网站，在阿里云上买了两台服务器，然后四处采集老艺人的音乐，放在这个网站上。网站逐渐做起来之后，很多新疆音乐人，还专门来找他合作。

在线，不是简简单单帮你省点钱，而是突破行业原有的束缚，创造一个完全不一样的、更为方便快捷的新服务，在线让创新更有效率。就像美国在线开始提供在线的服务一样，在线在第一时刻带来的就是产品的简便和发展的迅速。

## 6.3 计算变成人类能力的一部分

云计算，是为有创造欲望的人，提供最好的弹药，去实现梦想。

很多年前，我在洛杉矶的棕桐滩参加过一个小型聚会。在聚会上，比尔·盖茨邀请了《星球大战》的导演乔治·卢卡斯（George Lucas）作为嘉宾访谈，卢卡斯说的一句话让我印象深刻：他在谈到自己拍摄《星球大战》的经历时，感慨地说如果让他再做一遍，他绝对不会再尝试用新技术去做新片子，那实在太痛苦了。我当时的想法是，如果真的有机会，我一定要尝尝用一项新技术做一件自己没做过的事情的滋味。

2016 年 1 月，我去了美国拉斯韦加斯，参加国际消费类电子产品展览会。在海尔的展台前，我停下了脚步，吸引我的不是曲面超薄、8K OLED（有机发光二极管）电视、激光电视或裸眼 3D，而是在一台展示机上播放的一部叫作「昆塔」的动画片。

2013 年 7 月，3D 动画电影《昆塔》在全球上映。这部电影讲述了一个名叫「菠菜」的孩子追随昆塔（传说中的一个英雄的名字）成为英雄的故事。《昆塔》是国内自主创作的第一部原创 3D 动画片，其中所有渲染都是在阿里云上完成的，那段时间有关于此的新闻铺天盖地。所以在今年的展览会上看到这部片子，就觉得有穿越之感了。

《昆塔》首次使用了大规模云计算进行后期渲染，而渲染是一部 3D 动画电影最终实现画面呈现的关键步骤。每一帧图片的渲染耗时，根据模型复杂程度不同，差异很大，模型越复杂，渲染时间越长。有人做过这样的计算：按照渲染一帧（一层）的平均耗时为 2 小时，2K—4K 的分辨率，160 分钟长度的影片，每分钟 9 000 帧图片（60 秒 ×30 帧 ×5 层）计算，整部影片的渲染时间长达 288 万小时，相当于一台普通服务器需要工作 328 年，而 3D 影片的渲染耗时则需在这个数字上乘以 2。

好莱坞动画大片《疯狂原始人》卷金无数，这部影片的出品方梦工厂 CEO 杰弗瑞·卡森伯格（Jeffrey Katzenberg）说：「《疯狂原始人》前后共花了 8 年时间，前 6 年都在构思故事，仅 3D 模型的渲染就耗时超过 8 000 万小时。」卡森伯格的话很有代表性，道出了传统渲染模式的瓶颈。以电影《阿凡达》为例，它动用了位于新西兰的维塔数码（Weta Digital）数字特效公司的 4 000 台服务器。在 2008 年，这样的规模可以在世界超级计算机 500 强的排名中位列第 193-197。

《昆塔》的导演李炼也碰到了同样的问题。「其实要做 10 分钟高质量的动画电影，国内早就能做到了，但是要做 90 分钟片长的片子，却几乎没有人试过。做这个事情之前我都没有意识到，这件事有多么艰难。在做剧中一个反派角色‘机器蜥蜴王’时，等这个角色构建完成后，我们发现我们工作室里的几百台计算机根本没有办法完成，无法在视效上成功渲染，同时保持它的画面质感和质量。」

李炼原先在广告业做了 20 多年，他把挣来的钱都花在了制作《昆塔》上面。三年时间，李炼整个团队只做动画，但是计算能力成了拦路虎：「你要 3D 的动画片栩栩如生，就需要模型做得复杂起来，越复杂越好，这样做起来才够精细。可是一精细以后，对渲染能力的要求就很高。」

李炼原本已经准备放弃复杂的做法，只用最简单的那套方案，丑是丑了点，至少做得出来，若是采用精细的方法，实在太难。幸运的是，李炼碰到了云渲染。

2011 年 7 月，在 1 500 台服务器组成的「飞天」集群上，用了将近 40 分钟的时间，云渲染完成了第一集专业动画片的渲染任务，共 6 654 帧的立体动画，分辨率为 3 076×1 080。这是当时亚洲规模最大的渲染集群，也是当时世界上最大的运行在通用云计算平台上的渲染系统。使用云计算进行渲染，可以将一个或者多个渲染任务分割成若干部分，在计算机集群中的各个节点同时进行，以此类推，耗时大大缩短。

这就是《昆塔》整体渲染工作只历时三个多月，相比以往动画制作方自己购买服务器、自建「渲染农场」的方式，整体速度提升两年半以上的根本原因。如何保质保量地保证《昆塔》影片的工期，是一个挑战，而且也是云渲染的技术难处所在：因为每天所能调动的机器数量不一样，所以我们要动态地调节制作方的需求。做渲染就好比是「蛮干」，片方做好前期的创意和建模，特效负责方需要快速及时地将模型渲染出来，保证他们在进度之内看到样片并适时地进行调整和修改。说到底，云渲染的技术特点是几十倍成百倍地节约时间。

当时负责《阿凡达》特效设计的著名公司维塔数码，雇用了超过 900 人的团队为这部电影工作，为了渲染《阿凡达》后期制作的 240 000 帧画面，维塔数码动用了占地 10 000 平方英尺的服务器群，它所使用的 4 000 台服务器，共有 35 000 个处理器核心，104TB 的内存。

相比之下，《昆塔》制作最高峰时动用了阿里云 6 100 余台服务器，用到了 15 万个处理器核心和 400TB 的内存，累计计算量超过 1 000 万个小时，通过 Web 自助方式提交任务。这样大的工作量，如果没有云渲染的技术协助，《昆塔》成片难度极大。

大型的动画企业虽然有自己的「渲染农场」，但仍无法满足对计算资源日益增长的巨大需求。必须以足够低的成本向创意生产者提供足够多的资源，这样才能真正帮助他们将创意转换成商业价值。云渲染在短时间内提供了超大量、高效率的计算能力，三个月内完成了博采（《昆塔》出品方）自有「渲染农场」原本需要 40 个月才能完成的渲染任务，时间效率提升了 13.3 倍。相比使用云渲染，在相同时间成本上（三个月内完成），自建「渲染农场」需要一次性投入至少 2 800 万元购买硬件，而且硬件成本还存在回收困难、维护麻烦的问题。简单地说，使用云渲染使全片投入成本节省了 91.07%。

后来浙江大学的一位学生，花了 200 元钱，利用云渲染制作出了一部 5 分钟的动画短片，最后还借这个作品拿到了校方颁发的优秀毕业设计奖。这些例子都说明越来越多的中小型创意者今后可以获得大公司才能拥有的计算资源，仅仅凭借自己的创意就能生存和发展。低成本，正是云渲染技术的优势所在。对于国内民间很多的中小型创意生产者尤其个人而言，他们缺的不是创意、想法和故事，他们缺的是硬件投入和技术支持。

可以想见，他们的作品如果只用一台计算机来做渲染，一个简单的作业就需要十天半个月才能完成，时间和精力都耗费不起。云渲染技术能以足够低的价格和按需生产的方式助力作品的完成。作为公共服务的云计算，为有创造欲望的人提供了最好的弹药去实现梦想，同时也在挑战他们的创造力。

《昆塔》就变成了这个机会，用导演李炼的话讲，是两个疯子碰到一起完成了一件不可能的事，结果就是《昆塔》成功上映了。我认为，云计算可以解放创作者的生产力。对艺术家来说，最重要的一件事情，是有了创意之后马上就可以看到作品并进行修改，失去的时间越多，失去的修改机会也越多。云计算提供的巨大能力，看起来是用很短时间把一件需要更多时间的事做完了，结果是让艺术家有更多的时间和机会去修改他的作品，更加精益求精。毕竟，人是被时间束缚的，好比码字这事，码字的速度加快一点，做别的事情的时间也就多一点。说白了，就是计算能力在间接地生产创造力。《昆塔》的整个制作周期是三年，包括所有的创意和修改，假如没有云计算，光是渲染就要花费整整三年，那这个事情就变得没法做了。在这个意义上，计算能力不仅是快和慢的问题，更是有和无的问题。

计算变成了一种新的能力，一种核心竞争力。看看《昆塔》的经历你就知道，一个小公司真的可以做成一家大公司才能做成的事情，而云计算正为这种勇气提供了羽翼。借用《昆塔》的主题曲来说：不可能是不可能的事。2016 年，据我了解，李炼还在为《昆塔 2》工作。

## 6.4 数据是世界的新财富

阿里金融的贷款和传统银行的贷款也是不一样的，此贷款非彼贷款。

公证是一件重要而历史悠久的事情，远在古代奴隶制的罗马共和国末期，就有了一种专门从事代书职业的人 —— 被人们称为「达比伦」（Tabelliones）的代书人。他们具备法律知识，熟练地用拉丁文代拟各种法律文书，作为一种专业人员领取规定的报酬。这种代书人制度被认为是现代公证制度的起源。

中国的公证制度自 20 世纪 80 年代恢复以来，截至 2013 年，公证机构的数量已达 3 000 余家，比 1980 年增长了 5 倍；公证从业人员两万余人，增长了 15 倍；年办证量 1 000 余万件，增长了 110 余倍。公证制度在经历了 30 多年的高速增长后，一不留意进入了互联网时代。在中国，人民法院审理案件时对证据的最基本要求是：相对固定，没有被篡改，能在法庭上直观呈现并能卷宗归档。

但到了在线社会，电话、即时通信软件上的聊天记录、服务器代码…… 各种非文书类的公证需求层出不穷。和传统文书相比，互联网时代的电子数据想做公证，会碰到完全不同于以往的困难。那不只是数量的问题，更重要的是规则发生了巨大的变化。在法律上，没有办法确认这些电子数据的真实性、完整性。当你将网络上的电子订单、电子邮件、QQ 或 MSN 等交流内容下载并打印出来，当成证据交到法院时，却不能得到法院的认可。

通过传统的离线方式，也是能做到的，只是很复杂。例如到公证处，当着公证人员的面，用磁带录下通话。但这种做法显然效率太低了，取证、调用、保存，都有各自的成本。这里提到的成本指的不是耗费的金钱成本，而是指能否被大规模铺开使用的成本。

安存科技想利用云计算改变这个现状，电话录音的公证是一个起点。安存科技的产品「安存」不仅记录通话内容和通话时长、还记录主叫号码、被叫号码，以及精确到秒的通话开始时间和通话结束时间。重要的是，你对自己想要录音的电话，可以拨打 951335 + 对方电话号码，录音内容会保存在阿里云提供的云存储上，不需要随身携带，也不会丢失，不受时空限制，只要有互联网的地方就可以收听、下载及举证应用。这是对当时双方的交流场景最为真实和完整的记录，系统后台直接与公证处对接，公证处可依法、便捷地出具录音保全公证书的特性，使该录音更加具有法律效力。2011 年 11 月，安存电子 951335 电话语录语音平台正式上线。

2012 年 5 月，杭州媒体报道了自 951335 电话语录语音保全系统上线以来，杭州西湖公证处收到的第一份公证申请，经过全面审查后，第二天公证处就出具了电话语录证据保全公证书。在 2013 年 1 月 1 日正式实施的《中华人民共和国民事诉讼法》第 63 条已经明确地将电子数据列为单一证据类别，电子数据证据成为法定证据。互联网催生了一个人称电子证据的新生行业。

在互联网如此普及的今天，网民和消费者的界限正在消弭，企业的疆界变得模糊，数据成为核心的资产，并将深刻影响企业的业务模式，甚至重构其文化和组织。公证是个古老而没有激情的传统行业，似乎变不出什么花样来，但是在线的出现却让公证行业重新焕发了生机。

公证如此，金融也如此。阿里金融的网站上是这样介绍阿里金融的：阿里金融通过互联网数据化运营模式，为小微企业、个人创业者提供可持续性的、普惠制的电子商务金融服务，向这些无法在传统金融渠道获得贷款的弱势群体提供「金额小、期限短、随借随还」的纯信用小额贷款服务。

从 2009 年 10 月的第一天开始，阿里金融开始使用阿里云的云计算平台作为运算淘宝和支付宝数据的计算平台，随后根据数据模型的不断优化，逐渐推出了订单贷款、淘宝信用贷款等产品。阿里金融也极为重视云计算技术，当时阿里云在公司也是新业务，两个新业务在一起发展，是需要极大勇气的。从某种意义上讲，阿里金融和阿里云计算互为依赖、共同发展，而且都小有成绩，堪称大公司内部创新的典范。

阿里小贷与传统银行的小额贷款模式不一样，它不需要抵押物，是纯信用贷款。利用大数据挖掘，不需要太多的人工审核。目前做到了 3 分钟提交货款申请，1 秒批准，0 人工干预。

信用从哪里来？从数据中来。阿里金融是大数据的产物，数据是它的基础，也是核心。以数据和网络为核心，阿里金融开放的新型微贷技术，成为解决小微企业融资的关键所在。在线贷款，使得信息更加透明。阿里金融的不良贷款率为 1.02%，而中国整个银行业的小微企业的不良贷款率在 5.5%-6%。依靠数据，而不是依赖担保或者抵押，这是阿里金融最大的特色。这种做法不仅极大地降低了小微企业的融资门槛，也让小微企业在电商平台上所积累的数据以信用价值的方式得以呈现。

2013 年，「淘宝 10 周年时光机」发布，用户可以看到自己从 2003 年淘宝成立之后至 2013 年 5 月的支付宝消费状况。为什么能做到这些，道理很简单：淘宝、天猫、支付宝的注册用户超过 6 亿，在售商品超过 10 亿种，平均每天发生 2 500 万笔的支付，年交易额上万亿元，是中国目前最大的互联网用户信用的数据原产地。

可是这些数据价值并不属于某家公司，它们是每个人的新财富，是每个用户自己创造的，是在一个不在线的世界里得不到的财富。今天，当你打开支付宝钱包就可看到自己的芝麻信用分。若你的芝麻信用分超过 700，你可以利用它申请新加坡签证；当你的芝麻信用分到了 750，你还可以凭此申请申根签证，无须提供你的存款证明。

数据也可以让你的信用更有尊严，它比信用卡更能体现你的信用。

离线状态下的这一切，有点像是中国温州的民间金融模式。温州的民间钱庄也需要数据。数据怎么搜集呢？很有意思，也很本土化：钱庄会花 10 块钱雇一位老太太，这位老太太的工作是搬个凳子坐在工厂门口，数一数今天工厂有多少人上下班，有多少货车进出 —— 通过这些数据，钱庄可以判断工厂的运营状态是好是坏，然后再来决定贷多少款给那个厂的老板。在这个土办法中，照样有数据，照样有数据分析。虽然另类，倒也真算是符合大数据的模式。只可惜，这个故事发生在离线世界。

过去所说的信用额度，是根据人们离线世界的资产，例如房子、抵押物、汽车等算出来的。也就是说，你的信用额度取决于你的离线数据。离线数据很容易造假，例如修改过的报表、虚假的证明等，总之办法很多，因为大家都知道会被用到的数据就那么几类。

现代大型银行面临的最大的挑战是什么，就是在评价你的信用时，它有太多的离线数据要处理。这可不是雇 100 个老太太拿着板凳去数数就够了的。银行的评价过程很复杂很漫长，而且成本很高。不同的是，阿里金融全程在线了，这是一次飞跃。一旦在线，就会产生一堆自己也不知道有用没用的数据，这时你再想造假就变得极其困难了。这时候的信用额度来自你的在线数据，通过一个不断调整的模型来计算，就可以得出你的信用额度了。而从有目的到无目的，也是一个巨大的改变。

当你有目的地去搜集数据的时候，你拿回来的数据的用途一定会有局限。因为你设想的目的会束缚你对于数据用途的想象。阿里金融所沉淀的数据，并没有明确的目的，它仅仅是正常地把在线行为的数据沉淀下来。所以，这种无目的的数据获取，有很多的想象空间。

金融在线后，整个操作成本就降低了，而成本的降低，使得只有少数人才能享用的东西，如今变成了大众都可以享用的东西。在这种环境下，不再只有贷款 10 万元时才有人搭理你，只借一两千元，甚至一元钱也可以。只有保证单位计算成本足够低，小额贷款不至于亏钱，系统才可以正常运转。

同时，你还要有足够的计算能力，得出结果的速度必须足够快。如果在线评价的过程，和线下一样要拖上一两个月，每次的接待能力，也只能应对 10 位顾客，这样的在线金融肯定会失败。

在阿里金融成立之初，我说阿里金融就好像在造直升机，而不是在造飞机。在专业书籍上，没有人管直升机叫直升飞机，因为直升机不是飞机。飞机的飞行原理其实很简单，它的空气动力学靠两翼发挥作用，气流吹过机翼上下表面而且要同时从机翼前端到达后端，所以从上缘经过的气流速度就要比经过下缘时的快。飞机比拼的是什么，看谁飞得高、飞得快、飞得远，这是飞机的特性。而直升机的特性是旋翼，主要靠主旋翼的控制部分与旋翼角度的控制部分，它的空气动力学原理和飞机是不同的。直升机要比谁离树梢更近，谁更隐蔽。直升机和飞机是两种不同的东西。世界各国的直升机都不在空军的建制内，而在陆军。虽然这两样东西，看上去一样，都能在大气层中飞行，但是此飞机非彼飞机。同样的，阿里金融的贷款与传统银行的贷款也是不一样的，此贷款非彼贷款。不是所有能飞的东西都叫飞机。

看待一个在线社会中的新产物时，不要局限在技术角度，更要看它的社会价值。曾经有人写了一份感谢信，他说通过阿里金融获得了一元钱的贷款，这是他从来没想到过的事情。说不定这个人是世界上获得最小额度贷款的人了。不管是不是，至少这一元钱对他来说，已经不是借笔钱那么简单了，它体现了对于个人的尊重。在过去的商业环境下，这件事不可能发生。而在在线的社会环境下，这种事会不断发生。

城市的在线同样会为我们带来惊喜。杭州是一座非常美丽的城市，2016 年 9 月 5 日，G20 峰会在杭州召开，使得这座城市更为大家熟知，我就生活工作在这里。城市本身是人类一个了不起的发明，但如今世界上几乎每个城市都遭受着交通拥堵问题的困扰，杭州也不例外。听多了智慧城市，也听多了交通拥堵，可我始终不明白为什么智慧城市也无法解决交通问题。带着这个疑问，我查阅了相关数据。杭州大概有八九千辆公交车，500 多条线路，7 000 多个车站，每天要运送大概 390 万人次。如此规模的交通运输需求，不规划肯定不行，而且单靠传统方法也不行，如果没有足够的数据，任何规划都显得有些苍白。

杭州主城区有超过 120 万辆机动车，人均保有量全国第一。当这上百万辆车驶出家门时，城市的管理者并不知道这些车从哪里出发，将到哪里去，所以无法对道路（空间）和交通信号（时间）等资源进行有效优化是可以想象的。很多时候，你会发现在很多路口，交警的指挥与红绿灯的设置是不一致的。原因就在于行车数据一直都没有沉淀下来。

智慧城市的建设，让我们城市中早就有了足够多的摄像头，这些摄像头每天可以为我们搜集数不清的数据，可是为什么这么多的数据却没能帮助解决交通拥堵问题呢？原因就在于我们的城市缺少一个整合数据的大脑，就像人的大脑一样，城市也应该有自己的大脑，时时刻刻了解城市状况，指导城市的运转。

这个问题几乎存在于中国每个大中城市，2016 年 4 月我生活工作的杭州成了第一个搭建数据大脑的城市，上接来自城市各路的数据，下接执行系统。这个城市大脑要帮助打通数据的经脉和筋脉，让过去沉淀淤积在一起的数据互通起来，让城市的「眼」（摄像头）和「手」（交通指挥）的动作协调起来。这不仅是一个城市的梦想，也成为杭州十几家企业的梦想，政府和企业一起认认真真坐在一起，用数据的思想来解决复杂的城市问题，我很自豪自己是其中的一分子。当一个城市把企业的数据、社会公共服务的数据和政府的数据汇集为一个大脑，当这个数据大脑可以用人工智能的方法让机器「看」那些在交警指挥中心没有机会看完的视频，我们就会找到一种更好地认识这个城市、理解这个城市的方法。城市大脑可以让我们彻底摆脱瞎子摸象和雾里看花式的数据使用方法，数据通过城市大脑成为城市的财富。

我相信，城市大脑的建设代表了杭州的城市管理理念，杭州要为中国和世界探索用云计算和大数据解决城市发展问题的方法。当我和一位在交通领域工作了几十年的专家谈起能否通过数据的使用，最终让杭州取消单双号限行时，这位专家的回答让我终生难忘，他说：「这是一个非常高尚的目标，世界上还没有一个城市采取了限行措施后再取消。」这位专家的回答让我意识到任何不取消限行的交通方案，都是没有诚意的。这不仅是梦想，也是前所未有的探索。我也非常期待 G20 峰会结束后的试验结果，在我看来那是一次伟大实践的开始。

未来是令人激动的，数据将会惠及百姓生活的方方面面，从教育到健康。交通优化迈出的一小步，不仅是城市发展的一大步，更是体现数据的社会价值的一个里程碑。